<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muay Thai Champions</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
        
        body {
            font-family: 'Orbitron', monospace;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            overflow-x: hidden;
        }
        
        .glow {
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.5);
            transition: all 0.3s ease;
        }
        
        .glow:hover {
            box-shadow: 0 0 30px rgba(239, 68, 68, 0.8);
            transform: translateY(-2px);
        }
        
        .fighter-card {
            background: linear-gradient(145deg, #2a2a3e, #1e1e2e);
            border: 2px solid #ef4444;
            transition: all 0.3s ease;
        }
        
        .fighter-card:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(239, 68, 68, 0.3);
        }
        
        .stat-bar {
            background: linear-gradient(90deg, #ef4444, #dc2626);
            height: 8px;
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        .thai-pattern {
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ef4444' fill-opacity='0.1'%3E%3Cpath d='M30 30c0-11.046-8.954-20-20-20s-20 8.954-20 20 8.954 20 20 20 20-8.954 20-20zm0 0c0 11.046 8.954 20 20 20s20-8.954 20-20-8.954-20-20-20-20 8.954-20 20z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        
        .social-tab-content {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="min-h-screen thai-pattern">
    <!-- Main Menu Page -->
    <div id="mainMenu" class="page active">
        <div class="min-h-screen flex flex-col items-center justify-center p-8">
            <div class="text-center mb-12">
                <h1 class="text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-red-500 to-red-700 mb-4">
                    ü•ä MUAY THAI CHAMPIONS ü•ä
                </h1>
                <p class="text-xl text-gray-300">The Art of Eight Limbs</p>
            </div>
            
            <div class="space-y-6 w-full max-w-md">
                <button onclick="showPage('characterCreation')" class="w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-500 hover:to-green-600 text-white font-bold py-4 px-8 rounded-lg glow transition-all duration-300">
                    üÜï NEW GAME
                </button>
                
                <button id="loadGameBtn" onclick="loadGame()" class="w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white font-bold py-4 px-8 rounded-lg transition-all duration-300 opacity-50 cursor-not-allowed" disabled>
                    üíæ LOAD GAME
                </button>
                
                <button onclick="showPage('characterSelect')" class="w-full bg-gradient-to-r from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 text-white font-bold py-4 px-8 rounded-lg glow transition-all duration-300">
                    ‚öîÔ∏è EXHIBITION FIGHT
                </button>
                
                <button onclick="showSettings()" class="w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 text-white font-bold py-4 px-8 rounded-lg transition-all duration-300">
                    ‚öôÔ∏è SETTINGS
                </button>
            </div>
        </div>
    </div>

    <!-- Character Creation Page -->
    <div id="characterCreation" class="page">
        <div class="min-h-screen p-8">
            <div class="max-w-2xl mx-auto">
                <div class="text-center mb-8">
                    <h2 class="text-4xl font-bold text-red-500 mb-4">CREATE YOUR FIGHTER</h2>
                    <p class="text-gray-300">Enter the ring as your own legend</p>
                </div>
                
                <div class="bg-gray-800 rounded-lg p-8 border-2 border-red-500">
                    <form id="characterForm" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-red-400 font-bold mb-2">Fighter Name *</label>
                                <input type="text" id="fighterName" required class="w-full bg-gray-700 text-white p-3 rounded border-2 border-gray-600 focus:border-yellow-400 focus:outline-none">
                            </div>
                            
                            <div>
                                <label class="block text-red-400 font-bold mb-2">Nickname</label>
                                <input type="text" id="nickname" placeholder="Optional" class="w-full bg-gray-700 text-white p-3 rounded border-2 border-gray-600 focus:border-red-400 focus:outline-none">
                            </div>
                            
                            <div>
                                <label class="block text-red-400 font-bold mb-2">Weight (lbs) *</label>
                                <input type="number" id="weight" required min="100" max="300" class="w-full bg-gray-700 text-white p-3 rounded border-2 border-gray-600 focus:border-red-400 focus:outline-none">
                            </div>
                            
                            <div>
                                <label class="block text-red-400 font-bold mb-2">Height (ft'in") *</label>
                                <input type="text" id="height" required placeholder="e.g., 5'10\"" class="w-full bg-gray-700 text-white p-3 rounded border-2 border-gray-600 focus:border-red-400 focus:outline-none">
                            </div>
                            
                            <div>
                                <label class="block text-red-400 font-bold mb-2">Hometown *</label>
                                <input type="text" id="hometown" required class="w-full bg-gray-700 text-white p-3 rounded border-2 border-gray-600 focus:border-red-400 focus:outline-none">
                            </div>
                            
                            <div>
                                <label class="block text-red-400 font-bold mb-2">State *</label>
                                <input type="text" id="state" required class="w-full bg-gray-700 text-white p-3 rounded border-2 border-gray-600 focus:border-red-400 focus:outline-none">
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-red-400 font-bold mb-4">Fighting Style *</label>
                            <div class="bg-gray-700 p-4 rounded border-2 border-gray-600 max-h-96 overflow-y-auto">
                                <div class="space-y-4">
                                    <label class="flex items-start space-x-3 cursor-pointer hover:bg-gray-600 p-3 rounded relative" onclick="showStyleStats('muay-femur')">
                                        <input type="radio" name="fightingStyle" value="muay-femur" required class="text-red-400 mt-1">
                                        <div class="flex-1">
                                            <span class="text-white font-bold text-lg">1. Muay Femur ‚Äì The Technician</span>
                                            <p class="text-blue-300 text-sm mt-1"><strong>Traits:</strong> Highly intelligent, evasive, strategic</p>
                                            <p class="text-green-300 text-sm"><strong>Techniques:</strong> Feints, counters, footwork, timing</p>
                                            <p class="text-yellow-300 text-sm"><strong>Famous Fighters:</strong> Saenchai, Samart Payakaroon</p>
                                            <p class="text-emerald-300 text-sm"><strong>Strengths:</strong> Adaptability, scoring, ring control</p>
                                        </div>
                                    </label>
                                    
                                    <label class="flex items-start space-x-3 cursor-pointer hover:bg-gray-600 p-3 rounded relative" onclick="showStyleStats('muay-mat')">
                                        <input type="radio" name="fightingStyle" value="muay-mat" required class="text-red-400 mt-1">
                                        <div class="flex-1">
                                            <span class="text-white font-bold text-lg">2. Muay Mat ‚Äì The Puncher</span>
                                            <p class="text-blue-300 text-sm mt-1"><strong>Traits:</strong> Aggressive, forward-moving, knockout-focused</p>
                                            <p class="text-green-300 text-sm"><strong>Techniques:</strong> Powerful punches, low kicks, elbows</p>
                                            <p class="text-yellow-300 text-sm"><strong>Famous Fighters:</strong> Ramon Dekkers, Anuwat Kaewsamrit</p>
                                            <p class="text-emerald-300 text-sm"><strong>Strengths:</strong> KO power, pressure fighting</p>
                                        </div>
                                    </label>
                                    
                                    <label class="flex items-start space-x-3 cursor-pointer hover:bg-gray-600 p-3 rounded relative" onclick="showStyleStats('muay-khao')">
                                        <input type="radio" name="fightingStyle" value="muay-khao" required class="text-red-400 mt-1">
                                        <div class="flex-1">
                                            <span class="text-white font-bold text-lg">3. Muay Khao ‚Äì The Knee Fighter</span>
                                            <p class="text-blue-300 text-sm mt-1"><strong>Traits:</strong> Clinch-heavy, relentless, physically dominant</p>
                                            <p class="text-green-300 text-sm"><strong>Techniques:</strong> Knees from clinch, body control, pressure</p>
                                            <p class="text-yellow-300 text-sm"><strong>Famous Fighters:</strong> Dieselnoi, Yodwicha</p>
                                            <p class="text-emerald-300 text-sm"><strong>Strengths:</strong> Clinch control, endurance, body damage</p>
                                        </div>
                                    </label>
                                    
                                    <label class="flex items-start space-x-3 cursor-pointer hover:bg-gray-600 p-3 rounded relative" onclick="showStyleStats('muay-tae')">
                                        <input type="radio" name="fightingStyle" value="muay-tae" required class="text-red-400 mt-1">
                                        <div class="flex-1">
                                            <span class="text-white font-bold text-lg">4. Muay Tae ‚Äì The Kicker</span>
                                            <p class="text-blue-300 text-sm mt-1"><strong>Traits:</strong> Long-range striker, powerful kicks</p>
                                            <p class="text-green-300 text-sm"><strong>Techniques:</strong> Roundhouse kicks, teeps, switch kicks</p>
                                            <p class="text-yellow-300 text-sm"><strong>Famous Fighters:</strong> Yodsanklai, Buakaw</p>
                                            <p class="text-emerald-300 text-sm"><strong>Strengths:</strong> Distance control, leg/body damage</p>
                                        </div>
                                    </label>
                                    
                                    <label class="flex items-start space-x-3 cursor-pointer hover:bg-gray-600 p-3 rounded relative" onclick="showStyleStats('muay-bouk')">
                                        <input type="radio" name="fightingStyle" value="muay-bouk" required class="text-red-400 mt-1">
                                        <div class="flex-1">
                                            <span class="text-white font-bold text-lg">5. Muay Bouk ‚Äì The Pressure Fighter</span>
                                            <p class="text-blue-300 text-sm mt-1"><strong>Traits:</strong> Non-stop aggression, high pace</p>
                                            <p class="text-green-300 text-sm"><strong>Techniques:</strong> Volume striking, forward movement</p>
                                            <p class="text-yellow-300 text-sm"><strong>Famous Fighters:</strong> Rodtang, Seksan</p>
                                            <p class="text-emerald-300 text-sm"><strong>Strengths:</strong> Conditioning, crowd-pleasing style</p>
                                        </div>
                                    </label>
                                    
                                    <label class="flex items-start space-x-3 cursor-pointer hover:bg-gray-600 p-3 rounded relative" onclick="showStyleStats('muay-sok')">
                                        <input type="radio" name="fightingStyle" value="muay-sok" required class="text-red-400 mt-1">
                                        <div class="flex-1">
                                            <span class="text-white font-bold text-lg">6. Muay Sok ‚Äì The Elbow Specialist</span>
                                            <p class="text-blue-300 text-sm mt-1"><strong>Traits:</strong> Close-range devastation</p>
                                            <p class="text-green-300 text-sm"><strong>Techniques:</strong> Horizontal, upward, spinning elbows</p>
                                            <p class="text-yellow-300 text-sm"><strong>Famous Fighters:</strong> Muangthai, Yodkhunpon</p>
                                            <p class="text-emerald-300 text-sm"><strong>Strengths:</strong> Cut-inducing strikes, clinch transitions</p>
                                        </div>
                                    </label>
                                    
                                    <label class="flex items-start space-x-3 cursor-pointer hover:bg-gray-600 p-3 rounded relative" onclick="showStyleStats('muay-plam')">
                                        <input type="radio" name="fightingStyle" value="muay-plam" required class="text-red-400 mt-1">
                                        <div class="flex-1">
                                            <span class="text-white font-bold text-lg">7. Muay Plam ‚Äì The Clinch Fighter</span>
                                            <p class="text-blue-300 text-sm mt-1"><strong>Traits:</strong> Grappling-heavy, positional control</p>
                                            <p class="text-green-300 text-sm"><strong>Techniques:</strong> Clinch entries, sweeps, knees</p>
                                            <p class="text-yellow-300 text-sm"><strong>Famous Fighters:</strong> Petchboonchu, Anderson Silva</p>
                                            <p class="text-emerald-300 text-sm"><strong>Strengths:</strong> Dominates inside range</p>
                                        </div>
                                    </label>
                                    
                                    <label class="flex items-start space-x-3 cursor-pointer hover:bg-gray-600 p-3 rounded relative" onclick="showStyleStats('muay-farang')">
                                        <input type="radio" name="fightingStyle" value="muay-farang" required class="text-red-400 mt-1">
                                        <div class="flex-1">
                                            <span class="text-white font-bold text-lg">8. Muay Farang ‚Äì The Foreigner's Style</span>
                                            <p class="text-blue-300 text-sm mt-1"><strong>Traits:</strong> Hybridized, often punch-heavy or kickboxing-influenced</p>
                                            <p class="text-green-300 text-sm"><strong>Techniques:</strong> Western boxing combos, low kicks, less clinch</p>
                                            <p class="text-yellow-300 text-sm"><strong>Famous Fighters:</strong> John Wayne Parr, Rob Kaman</p>
                                            <p class="text-emerald-300 text-sm"><strong>Strengths:</strong> Power, unpredictability</p>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Stats Panel -->
                        <div id="styleStatsPanel" class="mt-6 bg-gray-800 border-2 border-red-500 rounded-lg p-6 hidden">
                            <h3 class="text-xl font-bold text-red-400 mb-4">Fighting Style Stats</h3>
                            <div id="statsContent" class="grid grid-cols-2 gap-4">
                                <!-- Stats will be populated here -->
                            </div>
                        </div>
                        
                        <div class="flex space-x-4 pt-6">
                            <button type="button" onclick="showPage('mainMenu')" class="flex-1 bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded transition-all duration-300">
                                ‚Üê BACK
                            </button>
                            <button type="submit" class="flex-1 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-500 hover:to-green-600 text-white font-bold py-3 px-6 rounded glow transition-all duration-300">
                                CREATE FIGHTER ‚Üí
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

<<<<<<< HEAD
    <!-- Social Media Page -->
    <div id="socialMedia" class="page">
        <div class="min-h-screen bg-gradient-to-b from-gray-900 to-gray-800">
            <!-- Top Navigation Bar -->
            <div class="bg-gray-800 border-b-2 border-red-500 p-4">
                <div class="max-w-6xl mx-auto flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <h1 class="text-2xl font-bold text-red-500">ü•ä MT Champions</h1>
=======
        <!-- Techniques Screen -->
        <div id="techniques" class="screen">
            <button class="back-button" onclick="showScreen('main-menu')">‚Üê Back to Main Menu</button>
            
            <div class="category-header">Punches (‡∏´‡∏°‡∏±‡∏î - Mat)</div>
            <div class="technique-grid">
                <div class="technique-item" onclick="showTechnique('jab')">
                    <h3>Jab</h3>
                    <p>Quick straight punch with the lead hand</p>
                </div>
                <div class="technique-item" onclick="showTechnique('cross')">
                    <h3>Cross</h3>
                    <p>Powerful straight punch with the rear hand</p>
                </div>
                <div class="technique-item" onclick="showTechnique('hook')">
                    <h3>Hook</h3>
                    <p>Circular punch targeting the side of the opponent</p>
                </div>
                <div class="technique-item" onclick="showTechnique('uppercut')">
                    <h3>Uppercut</h3>
                    <p>Upward punch targeting the chin or body</p>
                </div>
            </div>

            <div class="category-header">Kicks (‡πÄ‡∏ï‡∏∞ - Tae)</div>
            <div class="technique-grid">
                <div class="technique-item" onclick="showTechnique('roundhouse')">
                    <h3>Roundhouse Kick</h3>
                    <p>Powerful circular kick using the shin</p>
                </div>
                <div class="technique-item" onclick="showTechnique('teep')">
                    <h3>Teep (Push Kick)</h3>
                    <p>Front kick used to push opponent away</p>
                </div>
                <div class="technique-item" onclick="showTechnique('lowkick')">
                    <h3>Low Kick</h3>
                    <p>Kick targeting the opponent's legs</p>
                </div>
            </div>

            <div class="category-header">Elbows (‡∏®‡∏≠‡∏Å - Sok)</div>
            <div class="technique-grid">
                <div class="technique-item" onclick="showTechnique('horizontal-elbow')">
                    <h3>Horizontal Elbow</h3>
                    <p>Side elbow strike across the body</p>
                </div>
                <div class="technique-item" onclick="showTechnique('upward-elbow')">
                    <h3>Upward Elbow</h3>
                    <p>Rising elbow targeting the chin</p>
                </div>
            </div>

            <div class="category-header">Knees (‡πÄ‡∏Ç‡πà‡∏≤ - Khao)</div>
            <div class="technique-grid">
                <div class="technique-item" onclick="showTechnique('straight-knee')">
                    <h3>Straight Knee</h3>
                    <p>Direct knee strike to the body or head</p>
                </div>
                <div class="technique-item" onclick="showTechnique('clinch-knee')">
                    <h3>Clinch Knee</h3>
                    <p>Knee strike from the clinch position</p>
                </div>
            </div>

            <div class="category-header">Clinch Work (‡∏à‡∏±‡∏ö - Jab)</div>
            <div class="technique-grid">
                <div class="technique-item" onclick="showTechnique('plum-clinch')">
                    <h3>Plum Clinch</h3>
                    <p>Double collar tie controlling opponent's head</p>
                </div>
                <div class="technique-item" onclick="showTechnique('arm-drag')">
                    <h3>Arm Drag</h3>
                    <p>Pulling opponent off balance to create openings</p>
                </div>
                <div class="technique-item" onclick="showTechnique('clinch-sweep')">
                    <h3>Clinch Sweep</h3>
                    <p>Foot sweep to take opponent down from clinch</p>
                </div>
                <div class="technique-item" onclick="showTechnique('neck-wrestling')">
                    <h3>Neck Wrestling</h3>
                    <p>Controlling and manipulating opponent's posture</p>
                </div>
            </div>
        </div>

        <!-- Fight Vault Screen -->
        <div id="fight-vault" class="screen">
            <button class="back-button" onclick="showScreen('main-menu')">‚Üê Back to Main Menu</button>
            <h2 style="text-align: center; margin-bottom: 30px; color: #333;">üèÜ Fight Vault</h2>
            
            <div class="category-header">Legendary Fights</div>
            <div class="fight-card" onclick="playFight('samart-dieselnoi')">
                <h4>üî• Classic Encounter</h4>
                <div class="fighters">Samart Payakaroon vs Dieselnoi Chor Thanasukarn</div>
                <div class="details">Lumpinee Stadium ‚Ä¢ 1982 ‚Ä¢ Technical masterpiece vs devastating knees</div>
            </div>
            
            <div class="fight-card" onclick="playFight('ramon-saenchai')">
                <h4>‚ö° Modern Classic</h4>
                <div class="fighters">Ramon Dekkers vs Saenchai</div>
                <div class="details">Multiple encounters ‚Ä¢ Dutch aggression meets Thai artistry</div>
            </div>

            <div class="category-header">Greatest Knockouts</div>
            <div class="content-grid">
                <div class="content-card">
                    <h4>ü•ä Devastating Elbows</h4>
                    <p>Collection of the most brutal elbow knockouts in Muay Thai history, showcasing the devastating power of this close-range weapon.</p>
                </div>
                <div class="content-card">
                    <h4>ü¶µ Legendary Kicks</h4>
                    <p>Roundhouse kicks that ended fights instantly, demonstrating perfect technique and timing from Thailand's greatest fighters.</p>
                </div>
                <div class="content-card">
                    <h4>üî• Flying Knees</h4>
                    <p>Spectacular jumping knee knockouts that showcase the athletic ability and precision of elite Muay Thai fighters.</p>
                </div>
            </div>

            <div class="category-header">Fighter Spotlights</div>
            <div class="content-grid">
                <div class="content-card">
                    <h4>üëë Samart Payakaroon</h4>
                    <p>The most technically gifted fighter in Muay Thai history. Known for his boxing skills, ring IQ, and ability to make the sport look effortless.</p>
                </div>
                <div class="content-card">
                    <h4>ü¶¥ Dieselnoi Chor Thanasukarn</h4>
                    <p>The Sky Piercing Knee. Dominated the golden era with his devastating clinch work and unmatched knee strikes.</p>
                </div>
                <div class="content-card">
                    <h4>üéØ Saenchai</h4>
                    <p>Modern legend known for his creative techniques, showmanship, and ability to defeat much larger opponents with skill and timing.</p>
                </div>
            </div>
        </div>

        <!-- Styles Screen -->
        <div id="styles" class="screen">
            <button class="back-button" onclick="showScreen('main-menu')">‚Üê Back to Main Menu</button>
            <h2 style="text-align: center; margin-bottom: 30px; color: #333;">‚öîÔ∏è Fighting Styles</h2>
            
            <div class="category-header">Styles</div>
            <div class="content-grid">
                <div class="content-card">
                    <h4>ü•ä Muay Mat</h4>
                    <h5>Power Puncher</h5>
                    <p>This style utilizes strong punches, low kicks, and aggressive forward pressure. It relies on overwhelming the opponnent with a barrage of strikes.</p>
                </div>
                <div class="content-card">
                    <h4>üß† Muay Femur</h4>
                    <h5>Technical Fighter</h5>
                    <p>Muay Femur fighters are known for their strategic and technical approach. they are well-rounded, with strong skills in all aspects of Muay Thai, and rely on out-thinking and out-maneuvering their opponents.</p>
                </div>
                <div class="content-card">
                    <h4>ü¶¥ Muay Khao</h4>
                    <h5>Knee Fighter</h5>
                    <p>Fighters of this style excel in close-range combat. Using knees & clinch work to wear down their opponents, they often have strong endurance and a preference for drowning their opponent in a flurry of strikes.</p>
                </div>
                <div class="content-card">
                    <h4>üí™ Muay Sok</h4>
                    <h5>Elbow Specialist</h5>
                    <p>This style focuses on using elbows, especially in close range and clinch situations. Elbows are effective for opening cuts and causing damage, making this a dangerous and effective style.</p>
                </div>
                <div class="content-card">
                    <h4>ü¶µ Muay Tae</h4>
                    <h5>Kick Specialist</h5>
                    <p>Fighters of this style emphasize powerful kicks, particularly roundhouse kicks, and controlling distance in a fight.</p>
                </div>
            </div>

            <div class="category-header">Famous Camp Styles</div>
            <div class="content-grid">
                <div class="content-card">
                    <h4>üî• Jocky Gym</h4>
                    <p>Produces technical fighters with excellent boxing fundamentals. Known for developing well-rounded fighters who excel in all ranges.</p>
                </div>
                <div class="content-card">
                    <h4>‚ö° Fairtex</h4>
                    <p>Modern training methods combined with traditional techniques. Emphasizes athleticism, conditioning, and international competition preparation.</p>
                </div>
                <div class="content-card">
                    <h4>üèÜ Sityodtong</h4>
                    <p>Legendary camp known for producing champions. Focuses on mental toughness, technical precision, and the warrior spirit of Muay Thai.</p>
                </div>
            </div>

            <div class="category-header">Fighter Archetypes</div>
            <div class="content-grid">
                <div class="content-card">
                    <h4>ü•ä The Boxer</h4>
                    <p>Emphasizes hand techniques, footwork, and ring generalship. Uses superior boxing skills to control distance and outpoint opponents.</p>
                </div>
                <div class="content-card">
                    <h4>ü¶µ The Kicker</h4>
                    <p>Specializes in devastating leg kicks and body kicks. Uses reach advantage and timing to damage opponents from the outside.</p>
                </div>
                <div class="content-card">
                    <h4>ü§º The Clinch Fighter</h4>
                    <p>Dominates in close quarters with superior clinch work, knees, and elbows. Excels at controlling opponents and finishing fights up close.</p>
                </div>
                <div class="content-card">
                    <h4>‚ö° The Technician</h4>
                    <p>Master of timing, distance, and technique. Uses superior skill and ring IQ to outclass opponents with minimal wasted movement.</p>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game" class="screen">
            <button class="back-button" onclick="showScreen('main-menu')">‚Üê Back to Main Menu</button>
            <h2 style="text-align: center; margin-bottom: 30px; color: #333;">üéÆ Muay Thai Battle Arena</h2>
            
            <!-- Game Main Menu -->
            <div id="game-main-menu" class="game-main-menu">
                <div class="game-menu-grid">
                    <div class="game-menu-item" onclick="showExhibitionFight()">
                        <span class="icon">‚ö°</span>
                        <h3>Exhibition Fight</h3>
                        <p>Quick fight - choose any fighter and battle!</p>
>>>>>>> b1f3ae7d10d48f002029bf72438d5b1d8fc54e17
                    </div>
                    <div class="flex items-center space-x-6">
                        <button onclick="showSocialTab('feed')" id="feedTab" class="text-white hover:text-red-400 font-semibold transition-colors duration-300 border-b-2 border-red-500">
                            üè† Feed
                        </button>
                        <button onclick="showSocialTab('profile')" id="profileTab" class="text-gray-400 hover:text-red-400 font-semibold transition-colors duration-300">
                            üë§ Profile
                        </button>
                        <button onclick="showSocialTab('messages')" id="messagesTab" class="text-gray-400 hover:text-red-400 font-semibold transition-colors duration-300 relative">
                            üí¨ Messages
                            <span id="messageNotification" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">1</span>
                        </button>
                        <button onclick="showPage('mainMenu')" class="bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded transition-colors duration-300">
                            Exit
                        </button>
                    </div>
                </div>
            </div>

            <!-- Feed Tab Content -->
            <div id="feedContent" class="social-tab-content">
                <div class="max-w-4xl mx-auto p-6">
                    <!-- Story Bar -->
                    <div class="bg-gray-800 rounded-lg p-4 mb-6 border border-gray-700">
                        <h3 class="text-white font-bold mb-3">üî• Fighter Stories</h3>
                        <div class="flex space-x-4 overflow-x-auto">
                            <div class="flex-shrink-0 text-center cursor-pointer hover:opacity-80 transition-opacity">
                                <div class="w-16 h-16 bg-gradient-to-br from-red-500 to-red-700 rounded-full flex items-center justify-center mb-2">
                                    <span class="text-2xl">üáπüá≠</span>
                                </div>
                                <span class="text-xs text-gray-300">Saenchai</span>
                            </div>
                            <div class="flex-shrink-0 text-center cursor-pointer hover:opacity-80 transition-opacity">
                                <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center mb-2">
                                    <span class="text-2xl">üá≥üá±</span>
                                </div>
                                <span class="text-xs text-gray-300">Dekkers</span>
                            </div>
                            <div class="flex-shrink-0 text-center cursor-pointer hover:opacity-80 transition-opacity">
                                <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-green-700 rounded-full flex items-center justify-center mb-2">
                                    <span class="text-2xl">üáπüá≠</span>
                                </div>
                                <span class="text-xs text-gray-300">Buakaw</span>
                            </div>
                            <div class="flex-shrink-0 text-center cursor-pointer hover:opacity-80 transition-opacity">
                                <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-700 rounded-full flex items-center justify-center mb-2">
                                    <span class="text-2xl">üá¶üá∫</span>
                                </div>
                                <span class="text-xs text-gray-300">JWP</span>
                            </div>
                        </div>
                    </div>

                    <!-- Posts Feed -->
                    <div class="space-y-6">
                        <!-- Post 1 -->
                        <div class="bg-gray-800 rounded-lg border border-gray-700">
                            <div class="p-4 border-b border-gray-700">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-gradient-to-br from-red-500 to-red-700 rounded-full flex items-center justify-center">
                                        <span class="text-lg">üáπüá≠</span>
                                    </div>
                                    <div>
                                        <h4 class="text-white font-semibold">Saenchai PKSaenchaigym</h4>
                                        <p class="text-gray-400 text-sm">2 hours ago ‚Ä¢ Bangkok, Thailand</p>
                                    </div>
                                </div>
                            </div>
                            <div class="p-4">
                                <p class="text-gray-300 mb-3">Just finished an amazing training session! The art of eight limbs never stops teaching us. üôè #MuayThai #Training #Blessed</p>
                                <div class="bg-gradient-to-r from-red-900 to-red-800 rounded-lg p-6 text-center">
                                    <span class="text-4xl">ü•ä</span>
                                    <p class="text-white mt-2">Training at Lumpinee Stadium</p>
                                </div>
                            </div>
                            <div class="p-4 border-t border-gray-700 flex items-center justify-between">
                                <div class="flex space-x-6">
                                    <button class="flex items-center space-x-2 text-gray-400 hover:text-red-400 transition-colors">
                                        <span>‚ù§Ô∏è</span>
                                        <span>247</span>
                                    </button>
                                    <button class="flex items-center space-x-2 text-gray-400 hover:text-blue-400 transition-colors">
                                        <span>üí¨</span>
                                        <span>32</span>
                                    </button>
                                    <button class="flex items-center space-x-2 text-gray-400 hover:text-green-400 transition-colors">
                                        <span>üîÑ</span>
                                        <span>15</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Post 2 -->
                        <div class="bg-gray-800 rounded-lg border border-gray-700">
                            <div class="p-4 border-b border-gray-700">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center">
                                        <span class="text-lg">üá≥üá±</span>
                                    </div>
                                    <div>
                                        <h4 class="text-white font-semibold">Ramon Dekkers Legacy</h4>
                                        <p class="text-gray-400 text-sm">5 hours ago ‚Ä¢ Amsterdam, Netherlands</p>
                                    </div>
                                </div>
                            </div>
                            <div class="p-4">
                                <p class="text-gray-300 mb-3">Remembering the Diamond! His aggressive style changed Muay Thai forever. üíé #RamonDekkers #MuayThai #Legend</p>
                                <div class="bg-gradient-to-r from-blue-900 to-blue-800 rounded-lg p-6 text-center">
                                    <span class="text-4xl">üíé</span>
                                    <p class="text-white mt-2">"The Diamond" - Forever in our hearts</p>
                                </div>
                            </div>
                            <div class="p-4 border-t border-gray-700 flex items-center justify-between">
                                <div class="flex space-x-6">
                                    <button class="flex items-center space-x-2 text-gray-400 hover:text-red-400 transition-colors">
                                        <span>‚ù§Ô∏è</span>
                                        <span>892</span>
                                    </button>
                                    <button class="flex items-center space-x-2 text-gray-400 hover:text-blue-400 transition-colors">
                                        <span>üí¨</span>
                                        <span>156</span>
                                    </button>
                                    <button class="flex items-center space-x-2 text-gray-400 hover:text-green-400 transition-colors">
                                        <span>üîÑ</span>
                                        <span>78</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Profile Tab Content -->
            <div id="profileContent" class="social-tab-content hidden">
                <div class="max-w-4xl mx-auto p-6">
                    <!-- Profile Header -->
                    <div class="bg-gray-800 rounded-lg border border-gray-700 mb-6">
                        <div class="h-32 bg-gradient-to-r from-red-600 to-red-800 rounded-t-lg relative">
                            <div class="absolute -bottom-12 left-6">
                                <div class="w-24 h-24 bg-gradient-to-br from-yellow-500 to-yellow-700 rounded-full border-4 border-gray-800 flex items-center justify-center">
                                    <span class="text-3xl">ü•ä</span>
                                </div>
                            </div>
                        </div>
                        <div class="pt-16 p-6">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h2 id="profileName" class="text-2xl font-bold text-white">Fighter Name</h2>
                                    <p id="profileNickname" class="text-gray-400 text-lg">"The Nickname"</p>
                                    <p id="profileLocation" class="text-gray-500 mt-1">üìç Location</p>
                                </div>
                                <button class="bg-red-600 hover:bg-red-500 text-white px-6 py-2 rounded-lg font-semibold transition-colors">
                                    Edit Profile
                                </button>
                            </div>
                            <div class="mt-4 grid grid-cols-4 gap-4 text-center">
                                <div>
                                    <div class="text-2xl font-bold text-white" id="profileWins">0</div>
                                    <div class="text-gray-400 text-sm">Wins</div>
                                </div>
                                <div>
                                    <div class="text-2xl font-bold text-white" id="profileLosses">0</div>
                                    <div class="text-gray-400 text-sm">Losses</div>
                                </div>
                                <div>
                                    <div class="text-2xl font-bold text-white">1.2K</div>
                                    <div class="text-gray-400 text-sm">Followers</div>
                                </div>
                                <div>
                                    <div class="text-2xl font-bold text-white">856</div>
                                    <div class="text-gray-400 text-sm">Following</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Fighter Stats -->
                    <div class="bg-gray-800 rounded-lg border border-gray-700 p-6 mb-6">
                        <h3 class="text-xl font-bold text-white mb-4">ü•ä Fighter Stats</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <p class="text-gray-400">Weight Class</p>
                                <p id="profileWeight" class="text-white font-semibold">-- lbs</p>
                            </div>
                            <div>
                                <p class="text-gray-400">Height</p>
                                <p id="profileHeight" class="text-white font-semibold">--</p>
                            </div>
                            <div>
                                <p class="text-gray-400">Fighting Style</p>
                                <p id="profileStyle" class="text-white font-semibold">--</p>
                            </div>
                            <div>
                                <p class="text-gray-400">Pro Since</p>
                                <p id="profileProSince" class="text-white font-semibold">2024</p>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Posts -->
                    <div class="bg-gray-800 rounded-lg border border-gray-700 p-6">
                        <h3 class="text-xl font-bold text-white mb-4">üì± Recent Posts</h3>
                        <div class="text-center text-gray-400 py-8">
                            <span class="text-4xl">üìù</span>
                            <p class="mt-2">No posts yet. Share your training journey!</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Messages Tab Content -->
            <div id="messagesContent" class="social-tab-content hidden">
                <div class="max-w-4xl mx-auto p-6">
                    <div class="bg-gray-800 rounded-lg border border-gray-700">
                        <div class="p-4 border-b border-gray-700">
                            <h3 class="text-xl font-bold text-white">üí¨ Messages</h3>
                        </div>
                        
                        <!-- Message List -->
                        <div id="messagesList" class="divide-y divide-gray-700">
                            <!-- Fight offer message will be inserted here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Character Selection Page -->
    <div id="characterSelect" class="page">
        <div class="min-h-screen p-8">
            <div class="text-center mb-8">
                <h2 class="text-4xl font-bold text-red-500 mb-4">SELECT YOUR FIGHTER</h2>
                <p class="text-gray-300">Choose your champion for the exhibition match</p>
            </div>
            
            <div class="text-center mb-8">
                <div class="bg-gray-800 rounded-lg p-6 border-2 border-yellow-400 max-w-md mx-auto">
                    <h3 class="text-xl font-bold text-yellow-400 mb-4">Fight Type</h3>
                    <div class="space-y-3">
                        <label class="flex items-center space-x-3 cursor-pointer">
                            <input type="radio" name="fightType" value="regular" checked class="text-yellow-400">
                            <div class="flex-1 text-left">
                                <div class="text-white font-semibold">Regular Fight (3 Rounds)</div>
                                <div class="text-gray-400 text-sm">3 minutes per round</div>
                            </div>
                        </label>
                        <label class="flex items-center space-x-3 cursor-pointer">
                            <input type="radio" name="fightType" value="championship" class="text-yellow-400">
                            <div class="flex-1 text-left">
                                <div class="text-white font-semibold">Championship Fight (5 Rounds)</div>
                                <div class="text-gray-400 text-sm">3 minutes per round - Title on the line!</div>
                            </div>
                        </label>
                    </div>
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 max-w-7xl mx-auto">
                <!-- Fighter cards will be generated by JavaScript -->
            </div>
            
            <div class="text-center mt-8 space-y-4">
                
                <button onclick="showPage('mainMenu')" class="bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-8 rounded transition-all duration-300">
                    ‚Üê BACK TO MENU
                </button>
            </div>
        </div>
    </div>

    <!-- Fight Screen -->
    <div id="fightScreen" class="page">
        <div class="min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 relative">
            <!-- Top Health Bars -->
            <div class="p-6">
                <!-- Win/Loss Record -->
                <div id="fightRecord" class="text-center mb-4">
                    <div class="text-xl font-bold text-yellow-400">
                        Record vs <span id="recordOpponent">Opponent</span>: 
                        <span class="text-green-400" id="recordWins">0</span> - 
                        <span class="text-red-400" id="recordLosses">0</span>
                    </div>
                </div>
                
                <div class="flex justify-between items-center max-w-6xl mx-auto">
                    <!-- Player Health (Left) -->
                    <div class="w-80">
                        <div class="text-white text-lg font-bold mb-2">
                            <span id="playerName" class="text-blue-400">Player</span> HP: <span id="playerHealthText">100/100</span>
                        </div>
                        <div class="w-full bg-gray-600 rounded-full h-6">
                            <div id="playerHealthBar" class="bg-gradient-to-r from-green-500 to-red-500 h-6 rounded-full transition-all duration-500" style="width: 100%"></div>
                        </div>
                    </div>
                    
                    <!-- Round Info Display -->
                    <div class="text-center mx-8">
                        <div class="text-4xl text-red-500 font-black animate-pulse mb-2">VS</div>
                        <div class="bg-green-800 rounded-lg p-3 border-2 border-red-500" id="timerContainer">
                            <div class="text-red-400 font-bold text-lg" id="roundDisplay">ROUND 1</div>
                            <div class="text-white font-mono text-xl" id="timerDisplay">3:00</div>
                            <div class="text-xs text-gray-400" id="fightTypeDisplay">Regular Fight</div>
                            <div id="championshipBelt" class="text-2xl hidden">üèÜ</div>
                        </div>
                    </div>
                    
                    <!-- Opponent Health (Right) -->
                    <div class="w-80">
                        <div class="text-white text-lg font-bold mb-2 text-right">
                            <span id="opponentName" class="text-red-400">Opponent</span> HP: <span id="opponentHealthText">100/100</span>
                        </div>
                        <div class="w-full bg-gray-600 rounded-full h-6">
                            <div id="opponentHealthBar" class="bg-gradient-to-r from-green-500 to-red-500 h-6 rounded-full transition-all duration-500" style="width: 100%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Center Battle Area -->
            <div class="flex-1 flex items-center justify-center py-8">
                <div class="w-full max-w-6xl mx-auto">
                    <div class="flex justify-between items-center h-96">
                        <!-- Player Side (Left) -->
                        <div class="text-center w-80">
                            <div class="flex items-center justify-center space-x-4 mb-4">
                                <span id="playerFlag" class="text-6xl">üáπüá≠</span>
                            </div>
                            <div class="text-gray-300 text-lg">Level 1</div>
                            <div id="playerCombo" class="text-yellow-400 text-lg font-bold hidden">
                                üî• COMBO x<span id="playerComboCount">0</span>
                            </div>
                            <div class="text-blue-400 text-2xl font-bold mt-2">PLAYER</div>
                        </div>
                        
                        <!-- Center Battle Status -->
                        <div class="flex-1 mx-8">
                            <!-- Distance Tracker with Side Dots -->
                            <div class="flex items-center justify-between mb-2">
                                <!-- Player Distance Dots -->
                                <div class="flex space-x-2">
                                    <div id="playerDot1" class="w-3 h-3 rounded-full bg-gray-600 transition-all duration-300"></div>
                                    <div id="playerDot2" class="w-3 h-3 rounded-full bg-gray-600 transition-all duration-300"></div>
                                    <div id="playerDot3" class="w-3 h-3 rounded-full bg-gray-600 transition-all duration-300"></div>
                                </div>
                                
                                <!-- Center Distance Text -->
                                <div class="text-center">
                                    <div class="text-sm text-gray-400">Distance: <span id="distanceTracker" class="text-yellow-400 font-bold">In-Range</span></div>
                                </div>
                                
                                <!-- Opponent Distance Dots -->
                                <div class="flex space-x-2">
                                    <div id="opponentDot3" class="w-3 h-3 rounded-full bg-gray-600 transition-all duration-300"></div>
                                    <div id="opponentDot2" class="w-3 h-3 rounded-full bg-gray-600 transition-all duration-300"></div>
                                    <div id="opponentDot1" class="w-3 h-3 rounded-full bg-gray-600 transition-all duration-300"></div>
                                </div>
                            </div>
                            
                            <div id="battleLog" class="bg-gray-800 rounded-lg p-6 border-2 border-red-500 max-w-2xl mx-auto h-80">
                                <div id="battleStatus" class="text-xl text-white mb-4 text-center border-b border-gray-600 pb-2">Battle Ready!</div>
                                <div id="battleLogContent" class="h-60 overflow-y-auto space-y-2 text-sm">
                                    <div class="text-gray-400 text-center italic">Fight begins! Choose your first move...</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Opponent Side (Right) -->
                        <div class="text-center w-80">
                            <div class="flex items-center justify-center space-x-4 mb-4">
                                <span id="opponentFlag" class="text-6xl">üáπüá≠</span>
                            </div>
                            <div class="text-gray-300 text-lg">Level 1</div>
                            <div id="opponentCombo" class="text-orange-400 text-lg font-bold hidden">
                                üî• COMBO x<span id="opponentComboCount">0</span>
                            </div>
                            <div class="text-red-400 text-2xl font-bold mt-2">OPPONENT</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bottom Section - Controls -->
            <div class="p-6">

                <!-- Battle Actions -->
                <div id="battleActions" class="grid grid-cols-4 gap-4 max-w-4xl mx-auto">
                    <button onclick="showAttackMenu()" class="bg-red-600 hover:bg-red-500 text-white font-bold py-4 px-6 rounded-lg glow transition-all duration-300">
                        ‚öîÔ∏è ATTACK
                    </button>
                    <button onclick="showDefenseMenu()" class="bg-blue-600 hover:bg-blue-500 text-white font-bold py-4 px-6 rounded-lg transition-all duration-300">
                        üõ°Ô∏è DEFENSE
                    </button>
                    <button onclick="showClinchMenu()" class="bg-purple-600 hover:bg-purple-500 text-white font-bold py-4 px-6 rounded-lg transition-all duration-300">
                        ü§º CLINCH
                    </button>
                    <button onclick="showDistanceMenu()" class="bg-green-600 hover:bg-green-500 text-white font-bold py-4 px-6 rounded-lg transition-all duration-300">
                        üìè DISTANCE
                    </button>
                </div>

                <!-- Sub Menus -->
                <div id="subMenu" class="mt-6 hidden">
                    <div id="attackMenu" class="hidden grid grid-cols-4 gap-2 max-w-4xl mx-auto">
                        <button onclick="playerAttack('jab')" class="bg-red-700 hover:bg-red-600 text-white py-3 px-4 rounded">Jab</button>
                        <button onclick="playerAttack('cross')" class="bg-red-700 hover:bg-red-600 text-white py-3 px-4 rounded">Cross</button>
                        <button onclick="playerAttack('hook')" class="bg-red-700 hover:bg-red-600 text-white py-3 px-4 rounded">Hook</button>
                        <button onclick="playerAttack('uppercut')" class="bg-red-700 hover:bg-red-600 text-white py-3 px-4 rounded">Uppercut</button>
                        <button onclick="playerAttack('teep')" class="bg-red-700 hover:bg-red-600 text-white py-3 px-4 rounded">Teep</button>
                        <button onclick="playerAttack('roundkick')" class="bg-red-700 hover:bg-red-600 text-white py-3 px-4 rounded">Round Kick</button>
                        <button onclick="playerAttack('knee')" class="bg-red-700 hover:bg-red-600 text-white py-3 px-4 rounded">Knee</button>
                        <button onclick="playerAttack('elbow')" class="bg-red-700 hover:bg-red-600 text-white py-3 px-4 rounded">Elbow</button>
                    </div>
                    
                    <div id="defenseMenu" class="hidden grid grid-cols-3 gap-2 max-w-3xl mx-auto">
                        <button onclick="playerDefense('block')" class="bg-blue-700 hover:bg-blue-600 text-white py-3 px-4 rounded">Block</button>
                        <button onclick="playerDefense('slip')" class="bg-blue-700 hover:bg-blue-600 text-white py-3 px-4 rounded">Slip</button>
                        <button onclick="playerDefense('parry')" class="bg-blue-700 hover:bg-blue-600 text-white py-3 px-4 rounded">Parry</button>
                        <button onclick="playerDefense('roll')" class="bg-blue-700 hover:bg-blue-600 text-white py-3 px-4 rounded">Roll</button>
                        <button onclick="playerDefense('pull')" class="bg-blue-700 hover:bg-blue-600 text-white py-3 px-4 rounded">Pull</button>
                        <button onclick="playerDefense('check')" class="bg-blue-700 hover:bg-blue-600 text-white py-3 px-4 rounded">Check</button>
                    </div>
                    
                    <div id="clinchMenu" class="hidden grid grid-cols-4 gap-2 max-w-4xl mx-auto">
                        <button onclick="playerClinch('setup')" class="bg-purple-700 hover:bg-purple-600 text-white py-3 px-4 rounded">Clinch Setup</button>
                        <button onclick="playerClinch('pummel')" class="bg-purple-700 hover:bg-purple-600 text-white py-3 px-4 rounded">Pummel</button>
                        <button onclick="playerClinch('sweep')" class="bg-purple-700 hover:bg-purple-600 text-white py-3 px-4 rounded">Sweep</button>
                        <button onclick="playerClinch('escape')" class="bg-purple-700 hover:bg-purple-600 text-white py-3 px-4 rounded">Escape</button>
                    </div>
                    
                    <div id="distanceMenu" class="hidden grid grid-cols-3 gap-2 max-w-3xl mx-auto">
                        <button onclick="playerDistance('create')" class="bg-green-700 hover:bg-green-600 text-white py-3 px-4 rounded">Create Space</button>
                        <button onclick="playerDistance('cover')" class="bg-green-700 hover:bg-green-600 text-white py-3 px-4 rounded">Cover Space</button>
                        <button onclick="playerDistance('angle')" class="bg-green-700 hover:bg-green-600 text-white py-3 px-4 rounded">Create Angle</button>
                    </div>
                    
                    <button onclick="hideSubMenus()" class="mt-4 bg-gray-600 hover:bg-gray-500 text-white py-2 px-6 rounded">‚Üê Back</button>
                </div>

                <!-- Battle Result Screen -->
                <div id="battleResult" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50">
                    <div class="bg-gray-800 rounded-lg p-8 border-4 border-red-500 text-center max-w-md w-full mx-4">
                        <div id="resultTitle" class="text-4xl font-black mb-6"></div>
                        <div id="resultMessage" class="text-xl text-gray-300 mb-8"></div>
                        <div id="resultButtons" class="space-y-4">
                            <!-- Buttons will be dynamically added here -->
                        </div>
                    </div>
                </div>

                <!-- Corner Break Screen -->
                <div id="cornerBreak" class="hidden fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50">
                    <div class="bg-gray-800 rounded-lg p-8 border-4 border-blue-500 text-center max-w-lg w-full mx-4">
                        <div class="text-3xl font-black text-blue-400 mb-4">üõë ROUND BREAK üõë</div>
                        <div class="text-lg text-gray-300 mb-2">Round <span id="breakRoundNumber">1</span> Complete!</div>
                        <div class="text-yellow-400 font-mono text-xl mb-6">Break Time: <span id="breakTimer">1:00</span></div>
                        
                        <div class="text-white text-lg mb-6">Choose your corner assistance:</div>
                        
                        <div class="grid grid-cols-2 gap-4 mb-6">
                            <button onclick="selectCornerItem('ice')" class="bg-gradient-to-r from-cyan-600 to-cyan-700 hover:from-cyan-500 hover:to-cyan-600 text-white font-bold py-4 px-4 rounded-lg transition-all duration-300">
                                üßä ICE<br>
                                <span class="text-sm">+10 HP, +10 Power</span>
                            </button>
                            <button onclick="selectCornerItem('water')" class="bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white font-bold py-4 px-4 rounded-lg transition-all duration-300">
                                üíß WATER<br>
                                <span class="text-sm">+5 HP, +15 Power</span>
                            </button>
                            <button onclick="selectCornerItem('enswell')" class="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-500 hover:to-green-600 text-white font-bold py-4 px-4 rounded-lg transition-all duration-300">
                                ü©π ENSWELL<br>
                                <span class="text-sm">+20 HP</span>
                            </button>
                            <button onclick="selectCornerItem('advice')" class="bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 text-white font-bold py-4 px-4 rounded-lg transition-all duration-300">
                                üí≠ ADVICE<br>
                                <span class="text-sm">2x Combo Damage</span>
                            </button>
                        </div>
                        
                        <div class="text-gray-400 text-sm">
                            Choose wisely! Each item can only be used once per fight.
                        </div>
                    </div>
                </div>

                <!-- Exit Buttons -->
                <div id="normalExitButtons" class="mt-6 text-center space-x-4">
                    <button onclick="showPage('characterSelect')" class="bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 px-4 rounded transition-all duration-300">
                        FIGHT AGAIN
                    </button>
                    <button onclick="showPage('mainMenu')" class="bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded transition-all duration-300">
                        MAIN MENU
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Fighter data
        const fighters = [
            {
                name: "Saenchai",
                speed: 95, power: 80, agility: 98,
                straight: 90, hook: 85, uppercut: 80, elbow: 88, knee: 85,
                roundKick: 95, teep: 98, clinchOff: 90, clinchDef: 95,
                flag: "üáπüá≠"
            },
            {
                name: "Samart",
                speed: 92, power: 78, agility: 96,
                straight: 95, hook: 88, uppercut: 85, elbow: 80, knee: 75,
                roundKick: 90, teep: 92, clinchOff: 85, clinchDef: 90,
                flag: "üáπüá≠"
            },
            {
                name: "Dieselnoi",
                speed: 75, power: 95, agility: 80,
                straight: 70, hook: 75, uppercut: 70, elbow: 80, knee: 100,
                roundKick: 85, teep: 70, clinchOff: 95, clinchDef: 85,
                flag: "üáπüá≠"
            },
            {
                name: "Ramon Dekkers",
                speed: 88, power: 95, agility: 85,
                straight: 92, hook: 95, uppercut: 90, elbow: 85, knee: 70,
                roundKick: 88, teep: 75, clinchOff: 70, clinchDef: 70,
                flag: "üá≥üá±"
            },
            {
                name: "Rob Kaman",
                speed: 80, power: 92, agility: 78,
                straight: 85, hook: 88, uppercut: 80, elbow: 80, knee: 75,
                roundKick: 95, teep: 80, clinchOff: 75, clinchDef: 75,
                flag: "üá≥üá±"
            },
            {
                name: "Yodsanklai",
                speed: 85, power: 92, agility: 84,
                straight: 85, hook: 90, uppercut: 85, elbow: 88, knee: 85,
                roundKick: 95, teep: 88, clinchOff: 85, clinchDef: 85,
                flag: "üáπüá≠"
            },
            {
                name: "Buakaw",
                speed: 82, power: 90, agility: 85,
                straight: 80, hook: 88, uppercut: 85, elbow: 90, knee: 90,
                roundKick: 92, teep: 90, clinchOff: 88, clinchDef: 88,
                flag: "üáπüá≠"
            },
            {
                name: "Somrak",
                speed: 90, power: 80, agility: 88,
                straight: 92, hook: 85, uppercut: 80, elbow: 85, knee: 80,
                roundKick: 88, teep: 90, clinchOff: 80, clinchDef: 85,
                flag: "üáπüá≠"
            },
            {
                name: "John Wayne Parr",
                speed: 85, power: 90, agility: 82,
                straight: 88, hook: 92, uppercut: 90, elbow: 85, knee: 78,
                roundKick: 90, teep: 80, clinchOff: 75, clinchDef: 75,
                flag: "üá¶üá∫"
            },
            {
                name: "Thongchai",
                speed: 80, power: 92, agility: 83,
                straight: 80, hook: 90, uppercut: 85, elbow: 88, knee: 88,
                roundKick: 85, teep: 80, clinchOff: 85, clinchDef: 85,
                flag: "üáπüá≠"
            }
        ];

        let selectedFighter = null;
        let gameData = JSON.parse(localStorage.getItem('muayThaiGame')) || null;
        
        // Battle system variables
        let battleState = {
            player: null,
            opponent: null,
            playerHealth: 100,
            opponentHealth: 100,
            playerStats: { attacks: 0, defenses: 0, exchanges: 0 },
            opponentStats: { attacks: 0, defenses: 0, exchanges: 0 },
            distance: 'in-range', // 'out-of-range', 'in-range', 'in-fighting'
            clinch: { active: false, dominant: null },
            currentTurn: 'player',
            playerAction: null,
            opponentAction: null,
            turnBonus: { player: false, opponent: false },
            angleBonus: { player: false, opponent: false },
            battleEnded: false,
            combo: { 
                player: 0, 
                opponent: 0,
                lastSuccessfulAttacker: null // 'player', 'opponent', or null
            },
            rounds: {
                current: 1,
                total: 3, // 3 for regular, 5 for championship
                timeLeft: 180, // 3 minutes in seconds
                isBreak: false,
                breakTimeLeft: 60, // 1 minute break
                timer: null,
                isChampionship: false
            },
            cornerBonus: {
                player: { type: null, value: 0, nextStrikePower: 0, nextComboDouble: false },
                opponent: { type: null, value: 0, nextStrikePower: 0, nextComboDouble: false }
            }
        };
        
        // Win/Loss tracking
        let fightRecord = {
            wins: 0,
            losses: 0,
            currentOpponent: null
        };
        
        // Social media variables
        let currentFightOffer = null;
        let socialMediaInitialized = false;
        
        // Attack data
        const attacks = {
            jab: { power: 3, type: 'punch' },
            cross: { power: 4, type: 'punch' },
            hook: { power: 5, type: 'punch' },
            uppercut: { power: 6, type: 'punch' },
            teep: { power: 3, type: 'kick' },
            roundkick: { power: 4, type: 'kick' },
            knee: { power: 5, type: 'knee' },
            elbow: { power: 4, type: 'elbow' }
        };

        // Get top 3 stats for a fighter
        function getTopStats(fighter) {
            const stats = [
                { name: 'Speed', value: fighter.speed },
                { name: 'Power', value: fighter.power },
                { name: 'Agility', value: fighter.agility },
                { name: 'Straight', value: fighter.straight },
                { name: 'Hook', value: fighter.hook },
                { name: 'Uppercut', value: fighter.uppercut },
                { name: 'Elbow', value: fighter.elbow },
                { name: 'Knee', value: fighter.knee },
                { name: 'Round Kick', value: fighter.roundKick },
                { name: 'Teep', value: fighter.teep },
                { name: 'Clinch Off', value: fighter.clinchOff },
                { name: 'Clinch Def', value: fighter.clinchDef }
            ];
            
            // Sort by value and return top 3
            return stats.sort((a, b) => b.value - a.value).slice(0, 3);
        }

        // Check if save file exists
        function checkSaveFile() {
            const loadBtn = document.getElementById('loadGameBtn');
            if (gameData) {
                loadBtn.disabled = false;
                loadBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                loadBtn.classList.add('glow');
            }
        }

        // Show page function
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            
            if (pageId === 'characterSelect') {
                generateFighterCards();
            } else if (pageId === 'socialMedia') {
                initializeSocialMedia();
            }
        }
        
        // Social media functions
        function initializeSocialMedia() {
            if (!socialMediaInitialized && gameData) {
                updateProfileInfo();
                generateFightOffers();
                socialMediaInitialized = true;
            }
        }
        
        function showSocialTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.social-tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Remove active state from all tabs
            document.querySelectorAll('#feedTab, #profileTab, #messagesTab').forEach(tab => {
                tab.className = 'text-gray-400 hover:text-red-400 font-semibold transition-colors duration-300';
            });
            
            // Show selected tab content and mark tab as active
            if (tabName === 'feed') {
                document.getElementById('feedContent').classList.remove('hidden');
                document.getElementById('feedTab').className = 'text-white hover:text-red-400 font-semibold transition-colors duration-300 border-b-2 border-red-500';
            } else if (tabName === 'profile') {
                document.getElementById('profileContent').classList.remove('hidden');
                document.getElementById('profileTab').className = 'text-white hover:text-red-400 font-semibold transition-colors duration-300 border-b-2 border-red-500';
            } else if (tabName === 'messages') {
                document.getElementById('messagesContent').classList.remove('hidden');
                document.getElementById('messagesTab').className = 'text-white hover:text-red-400 font-semibold transition-colors duration-300 border-b-2 border-red-500';
                // Remove notification when viewing messages
                document.getElementById('messageNotification').style.display = 'none';
                // Update messages display with both fight offers and social messages
                updateMessagesDisplay();
            }
        }
        
        function updateMessagesDisplay() {
            const messagesList = document.getElementById('messagesList');
            let messagesHTML = '';
            
            // Add fight offers first
            currentFightOffers.forEach(offer => {
                const totalPotential = offer.showMoney + offer.winBonus + offer.koBonus;
                const championshipBadge = offer.isChampionship ? '<span class="bg-yellow-500 text-black px-2 py-1 rounded text-xs font-bold">üèÜ CHAMPIONSHIP</span>' : '';
                
                messagesHTML += `
                    <div class="p-4 hover:bg-gray-700 transition-colors border-b border-gray-600">
                        <div class="flex items-start space-x-3">
                            <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-700 rounded-full flex items-center justify-center flex-shrink-0">
                                <span class="text-xl">üéØ</span>
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center justify-between mb-1">
                                    <h4 class="text-white font-semibold">Elite Fight Promotions</h4>
                                    <span class="text-xs text-gray-400">Just now</span>
                                </div>
                                <div class="mb-2">
                                    ${championshipBadge}
                                </div>
                                
                                <div class="bg-gray-700 rounded-lg p-4 mb-4">
                                    <div class="flex items-center space-x-3 mb-3">
                                        <span class="text-2xl">${offer.opponent.flag}</span>
                                        <div>
                                            <h5 class="text-white font-bold text-lg">${offer.opponent.name}</h5>
                                            <p class="text-gray-400 text-sm">Professional Muay Thai Fighter</p>
                                        </div>
                                    </div>
                                    
                                    <div class="grid grid-cols-2 gap-4 text-sm mb-4">
                                        <div>
                                            <p class="text-gray-400">Show Money:</p>
                                            <p class="text-blue-400 font-bold">$${offer.showMoney.toLocaleString()}</p>
                                        </div>
                                        <div>
                                            <p class="text-gray-400">Win Bonus:</p>
                                            <p class="text-green-400 font-bold">$${offer.winBonus.toLocaleString()}</p>
                                        </div>
                                        <div>
                                            <p class="text-gray-400">KO Bonus:</p>
                                            <p class="text-red-400 font-bold">$${offer.koBonus.toLocaleString()}</p>
                                        </div>
                                        <div>
                                            <p class="text-gray-400">Max Potential:</p>
                                            <p class="text-yellow-400 font-bold">$${totalPotential.toLocaleString()}</p>
                                        </div>
                                        <div>
                                            <p class="text-gray-400">Location:</p>
                                            <p class="text-white">${offer.location}</p>
                                        </div>
                                        <div>
                                            <p class="text-gray-400">Date:</p>
                                            <p class="text-white">${offer.date}</p>
                                        </div>
                                    </div>
                                    
                                    <div class="flex space-x-3">
                                        <button onclick="acceptFightOffer(${offer.id})" class="flex-1 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-500 hover:to-green-600 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300">
                                            ‚úÖ ACCEPT
                                        </button>
                                        <button onclick="declineFightOffer(${offer.id})" class="flex-1 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300">
                                            ‚ùå DECLINE
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            // Add social messages
            socialMessages.forEach(message => {
                const replySection = message.replied ? `
                    <div class="mt-2 p-2 bg-gray-600 rounded text-sm">
                        <p class="text-blue-400 font-semibold">You replied:</p>
                        <p class="text-gray-300">"${message.replyText}"</p>
                    </div>
                ` : '';
                
                messagesHTML += `
                    <div class="p-4 hover:bg-gray-700 transition-colors border-b border-gray-600">
                        <div class="flex items-start space-x-3">
                            <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center flex-shrink-0">
                                <span class="text-xl">${message.avatar}</span>
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center justify-between mb-1">
                                    <h4 class="text-white font-semibold">${message.sender}</h4>
                                    <span class="text-xs text-gray-400">${message.time}</span>
                                </div>
                                <p class="text-gray-300 text-sm mb-3">${message.message}</p>
                                ${replySection}
                                
                                <div class="flex space-x-2 mt-3">
                                    ${message.canReply ? `<button onclick="replyToMessage(${message.id})" class="bg-blue-600 hover:bg-blue-500 text-white px-3 py-1 rounded text-xs transition-colors">üí¨ Reply</button>` : ''}
                                    ${message.canBlock ? `<button onclick="blockUser(${message.id})" class="bg-red-600 hover:bg-red-500 text-white px-3 py-1 rounded text-xs transition-colors">üö´ Block</button>` : ''}
                                    ${message.canDelete ? `<button onclick="deleteMessage(${message.id})" class="bg-gray-600 hover:bg-gray-500 text-white px-3 py-1 rounded text-xs transition-colors">üóëÔ∏è Delete</button>` : ''}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            if (messagesHTML === '') {
                messagesHTML = `
                    <div class="p-8 text-center">
                        <div class="text-gray-400">
                            <span class="text-4xl">üì≠</span>
                            <p class="mt-2">No messages yet. Keep fighting to gain more fans!</p>
                        </div>
                    </div>
                `;
            }
            
            messagesList.innerHTML = messagesHTML;
        }
        
        function updateProfileInfo() {
            if (!gameData || !gameData.character) return;
            
            const character = gameData.character;
            
            // Update profile information
            document.getElementById('profileName').textContent = character.name;
            document.getElementById('profileNickname').textContent = character.nickname ? `"${character.nickname}"` : '"The Fighter"';
            document.getElementById('profileLocation').textContent = `üìç ${character.hometown}, ${character.state}`;
            document.getElementById('profileWeight').textContent = `${character.weight} lbs`;
            document.getElementById('profileHeight').textContent = character.height;
            document.getElementById('profileStyle').textContent = getStyleDisplayName(character.fightingStyle);
            document.getElementById('profileWins').textContent = gameData.progress.wins;
            document.getElementById('profileLosses').textContent = gameData.progress.losses;
        }
        
        function getStyleDisplayName(styleId) {
            const styleNames = {
                'muay-femur': 'Muay Femur (Technician)',
                'muay-mat': 'Muay Mat (Puncher)',
                'muay-khao': 'Muay Khao (Knee Fighter)',
                'muay-tae': 'Muay Tae (Kicker)',
                'muay-bouk': 'Muay Bouk (Pressure Fighter)',
                'muay-sok': 'Muay Sok (Elbow Specialist)',
                'muay-plam': 'Muay Plam (Clinch Fighter)',
                'muay-farang': 'Muay Farang (Foreigner Style)'
            };
            return styleNames[styleId] || 'Unknown Style';
        }
        
        function generateFightOffer() {
            // Select a random opponent
            const availableOpponents = fighters.filter(f => f.name !== gameData.character.name);
            const randomOpponent = availableOpponents[Math.floor(Math.random() * availableOpponents.length)];
            
            currentFightOffer = {
                opponent: randomOpponent,
                purse: Math.floor(Math.random() * 50000) + 10000, // $10k - $60k
                location: getRandomLocation(),
                date: getRandomFutureDate()
            };
            
            displayFightOfferMessage();
        }
        
        function getRandomLocation() {
            const locations = [
                'Lumpinee Stadium, Bangkok',
                'Rajadamnern Stadium, Bangkok',
                'Madison Square Garden, New York',
                'T-Mobile Arena, Las Vegas',
                'O2 Arena, London',
                'Saitama Super Arena, Japan',
                'Impact Arena, Bangkok',
                'Singapore Indoor Stadium'
            ];
            return locations[Math.floor(Math.random() * locations.length)];
        }
        
        function getRandomFutureDate() {
            const today = new Date();
            const futureDate = new Date(today.getTime() + (Math.random() * 30 + 7) * 24 * 60 * 60 * 1000); // 7-37 days from now
            return futureDate.toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
        }
        
        function displayFightOfferMessage() {
            const messagesList = document.getElementById('messagesList');
            
            messagesList.innerHTML = `
                <div class="p-4 hover:bg-gray-700 transition-colors cursor-pointer">
                    <div class="flex items-start space-x-3">
                        <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-700 rounded-full flex items-center justify-center flex-shrink-0">
                            <span class="text-xl">üéØ</span>
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center justify-between mb-1">
                                <h4 class="text-white font-semibold">Elite Fight Promotions</h4>
                                <span class="text-xs text-gray-400">Just now</span>
                            </div>
                            <p class="text-gray-300 text-sm mb-3">
                                ü•ä <strong>FIGHT OFFER</strong> - We have an exciting opportunity for you!
                            </p>
                            
                            <div class="bg-gray-700 rounded-lg p-4 mb-4">
                                <div class="flex items-center space-x-3 mb-3">
                                    <span class="text-2xl">${currentFightOffer.opponent.flag}</span>
                                    <div>
                                        <h5 class="text-white font-bold text-lg">${currentFightOffer.opponent.name}</h5>
                                        <p class="text-gray-400 text-sm">Professional Muay Thai Fighter</p>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <p class="text-gray-400">Purse:</p>
                                        <p class="text-green-400 font-bold">$${currentFightOffer.purse.toLocaleString()}</p>
                                    </div>
                                    <div>
                                        <p class="text-gray-400">Location:</p>
                                        <p class="text-white">${currentFightOffer.location}</p>
                                    </div>
                                    <div class="col-span-2">
                                        <p class="text-gray-400">Date:</p>
                                        <p class="text-white">${currentFightOffer.date}</p>
                                    </div>
                                </div>
                                
                                <div class="mt-4 pt-4 border-t border-gray-600">
                                    <p class="text-gray-300 text-sm mb-3">
                                        This is a great opportunity to showcase your skills against ${currentFightOffer.opponent.name}. 
                                        Are you ready to step into the ring?
                                    </p>
                                    
                                    <div class="flex space-x-3">
                                        <button onclick="acceptFightOffer()" class="flex-1 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-500 hover:to-green-600 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300">
                                            ‚úÖ ACCEPT FIGHT
                                        </button>
                                        <button onclick="declineFightOffer()" class="flex-1 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300">
                                            ‚ùå DECLINE
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Show notification
            document.getElementById('messageNotification').style.display = 'flex';
        }
        
        function acceptFightOffer() {
            if (!currentFightOffer) return;
            
            // Create player fighter based on character data
            const playerFighter = createPlayerFighter();
            
            // Check if this should be a championship fight (every 5 wins)
            const isChampionship = gameData && gameData.progress && gameData.progress.wins > 0 && gameData.progress.wins % 5 === 0;
            
            // Initialize battle with the offered opponent
            initializeBattle(playerFighter, currentFightOffer.opponent, isChampionship);
            showPage('fightScreen');
        }
        
        function declineFightOffer() {
            // Generate a new fight offer
            generateFightOffer();
            
            // Show a brief message
            const messagesList = document.getElementById('messagesList');
            messagesList.innerHTML = `
                <div class="p-4 text-center">
                    <div class="text-gray-400 mb-4">
                        <span class="text-2xl">üì±</span>
                        <p class="mt-2">Offer declined. Looking for new opportunities...</p>
                    </div>
                </div>
            `;
            
            // Generate new offer after a short delay
            setTimeout(() => {
                generateFightOffer();
            }, 2000);
        }
        
        function createPlayerFighter() {
            if (!gameData || !gameData.character) return null;
            
            const character = gameData.character;
            const stats = fightingStyleStats[character.fightingStyle];
            
            return {
                name: character.name,
                nickname: character.nickname,
                flag: "ü•ä", // Player flag
                ...stats // Spread the fighting style stats
            };
        }

        // Generate fighter cards
        function generateFighterCards() {
            const container = document.querySelector('#characterSelect .grid');
            container.innerHTML = '';
            
            fighters.forEach(fighter => {
                const card = document.createElement('div');
                card.className = 'fighter-card rounded-lg p-4 cursor-pointer relative overflow-hidden';
                card.onclick = () => selectFighter(fighter);
                
                // Get flag background based on country
                let flagBackground = '';
                if (fighter.flag === 'üáπüá≠') {
                    // Thailand: Red, White, Blue
                    flagBackground = 'linear-gradient(135deg, rgba(237, 28, 36, 0.2) 0%, rgba(255, 255, 255, 0.1) 33%, rgba(0, 55, 149, 0.2) 66%, rgba(237, 28, 36, 0.2) 100%)';
                } else if (fighter.flag === 'üá≥üá±') {
                    // Netherlands: Red, White, Blue (horizontal)
                    flagBackground = 'linear-gradient(180deg, rgba(174, 28, 40, 0.2) 0%, rgba(255, 255, 255, 0.1) 33%, rgba(33, 70, 139, 0.2) 66%)';
                } else if (fighter.flag === 'üá¶üá∫') {
                    // Australia: Blue with red and white accents
                    flagBackground = 'linear-gradient(135deg, rgba(0, 0, 139, 0.2) 0%, rgba(255, 0, 0, 0.1) 50%, rgba(255, 255, 255, 0.1) 100%)';
                }
                
                card.innerHTML = `
                    <div class="absolute inset-0 rounded-lg" style="background: ${flagBackground}"></div>
                    <div class="relative z-10">
                        <div class="text-center mb-4">
                            <div class="text-3xl mb-2">${fighter.flag}</div>
                            <h3 class="text-xl font-bold text-red-400">${fighter.name}</h3>
                        </div>
                        
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between items-center">
                                <span class="text-gray-300">Speed:</span>
                                <div class="flex-1 mx-2 bg-gray-600 rounded-full h-2">
                                    <div class="stat-bar rounded-full h-2" style="width: ${fighter.speed}%"></div>
                                </div>
                                <span class="text-white font-bold">${fighter.speed}</span>
                            </div>
                            
                            <div class="flex justify-between items-center">
                                <span class="text-gray-300">Power:</span>
                                <div class="flex-1 mx-2 bg-gray-600 rounded-full h-2">
                                    <div class="stat-bar rounded-full h-2" style="width: ${fighter.power}%"></div>
                                </div>
                                <span class="text-white font-bold">${fighter.power}</span>
                            </div>
                            
                            <div class="flex justify-between items-center">
                                <span class="text-gray-300">Agility:</span>
                                <div class="flex-1 mx-2 bg-gray-600 rounded-full h-2">
                                    <div class="stat-bar rounded-full h-2" style="width: ${fighter.agility}%"></div>
                                </div>
                                <span class="text-white font-bold">${fighter.agility}</span>
                            </div>
                        </div>
                        
                        <div class="mt-4 pt-4 border-t border-gray-600">
                            <div class="grid grid-cols-3 gap-1 text-xs">
                                ${getTopStats(fighter).map(stat => `
                                    <div class="text-center">
                                        <div class="text-gray-400">${stat.name}</div>
                                        <div class="text-red-400 font-bold">${stat.value}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
                
                container.appendChild(card);
            });
        }

        // Select fighter for exhibition
        function selectFighter(fighter) {
            selectedFighter = fighter;
            // Ensure opponent is different from selected fighter
            let opponent;
            do {
                opponent = fighters[Math.floor(Math.random() * fighters.length)];
            } while (opponent.name === fighter.name);
            
            // Get selected fight type
            const fightType = document.querySelector('input[name="fightType"]:checked').value;
            const isChampionship = fightType === 'championship';
            
            // Initialize battle state
            initializeBattle(fighter, opponent, isChampionship);
            showPage('fightScreen');
        }

        // Handle character creation form
        document.getElementById('characterForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                name: document.getElementById('fighterName').value,
                nickname: document.getElementById('nickname').value,
                weight: document.getElementById('weight').value,
                height: document.getElementById('height').value,
                hometown: document.getElementById('hometown').value,
                state: document.getElementById('state').value,
                fightingStyle: document.querySelector('input[name="fightingStyle"]:checked').value,
                createdAt: new Date().toISOString()
            };
            
            // Save game data
            gameData = {
                character: formData,
                progress: {
                    level: 1,
                    wins: 0,
                    losses: 0
                }
            };
            
            localStorage.setItem('muayThaiGame', JSON.stringify(gameData));
            checkSaveFile();
            
            alert(`Welcome to the ring, ${formData.name}! Your journey begins now.`);
            showPage('socialMedia');
        });

        // Load game function
        function loadGame() {
            if (gameData) {
                alert(`Welcome back, ${gameData.character.name}! Continuing your journey...`);
                // Here you would load the actual game state
            }
        }

        // Settings function
        function showSettings() {
            alert('Settings menu coming soon! üéÆ');
        }

        // Battle system functions
        function initializeBattle(player, opponent, isChampionship = false) {
            battleState.player = player;
            battleState.opponent = opponent;
            battleState.playerHealth = 100;
            battleState.opponentHealth = 100;
            battleState.playerStats = { attacks: 0, defenses: 0, exchanges: 0 };
            battleState.opponentStats = { attacks: 0, defenses: 0, exchanges: 0 };
            battleState.distance = 'in-range';
            battleState.clinch = { active: false, dominant: null };
            battleState.battleEnded = false;
            battleState.playerAction = null;
            battleState.opponentAction = null;
            battleState.turnBonus = { player: false, opponent: false };
            battleState.angleBonus = { player: false, opponent: false };
            battleState.combo = { 
                player: 0, 
                opponent: 0,
                lastSuccessfulAttacker: null
            };
            
            // Initialize round system
            battleState.rounds = {
                current: 1,
                total: isChampionship ? 5 : 3,
                timeLeft: 180, // 3 minutes
                isBreak: false,
                breakTimeLeft: 60, // 1 minute
                timer: null,
                isChampionship: isChampionship
            };
            
            // Initialize corner bonuses
            battleState.cornerBonus = {
                player: { type: null, value: 0, nextStrikePower: 0, nextComboDouble: false },
                opponent: { type: null, value: 0, nextStrikePower: 0, nextComboDouble: false }
            };
            
            // Initialize or update fight record
            if (fightRecord.currentOpponent !== opponent.name) {
                fightRecord.currentOpponent = opponent.name;
                fightRecord.wins = 0;
                fightRecord.losses = 0;
            }
            
            // Determine first turn based on speed
            battleState.currentTurn = player.speed >= opponent.speed ? 'player' : 'opponent';
            
            // Hide result screen and show normal controls
            document.getElementById('battleResult').classList.add('hidden');
            document.getElementById('cornerBreak').classList.add('hidden');
            document.getElementById('normalExitButtons').classList.remove('hidden');
            document.getElementById('battleActions').classList.remove('hidden');
            
            // Clear battle log
            document.getElementById('battleLogContent').innerHTML = '<div class="text-gray-400 text-center italic">Fight begins! Choose your first move...</div>';
            
            // Start round timer
            startRoundTimer();
            
            updateBattleUI();
        }
        
        function updateComboDisplay() {
            // Update player combo
            const playerComboElement = document.getElementById('playerCombo');
            const playerComboCount = document.getElementById('playerComboCount');
            
            if (battleState.combo.player > 0) {
                playerComboCount.textContent = battleState.combo.player;
                playerComboElement.classList.remove('hidden');
                
                // Change color based on combo level
                if (battleState.combo.player >= 10) {
                    playerComboElement.className = 'text-red-400 text-xl font-black animate-pulse';
                } else if (battleState.combo.player >= 5) {
                    playerComboElement.className = 'text-orange-400 text-lg font-bold';
                } else {
                    playerComboElement.className = 'text-yellow-400 text-lg font-bold';
                }
            } else {
                playerComboElement.classList.add('hidden');
            }
            
            // Update opponent combo
            const opponentComboElement = document.getElementById('opponentCombo');
            const opponentComboCount = document.getElementById('opponentComboCount');
            
            if (battleState.combo.opponent > 0) {
                opponentComboCount.textContent = battleState.combo.opponent;
                opponentComboElement.classList.remove('hidden');
                
                // Change color based on combo level
                if (battleState.combo.opponent >= 10) {
                    opponentComboElement.className = 'text-red-400 text-xl font-black animate-pulse';
                } else if (battleState.combo.opponent >= 5) {
                    opponentComboElement.className = 'text-orange-400 text-lg font-bold';
                } else {
                    opponentComboElement.className = 'text-orange-400 text-lg font-bold';
                }
            } else {
                opponentComboElement.classList.add('hidden');
            }
        }
        
        function startRoundTimer() {
            // Clear any existing timer
            if (battleState.rounds.timer) {
                clearInterval(battleState.rounds.timer);
            }
            
            battleState.rounds.timer = setInterval(() => {
                if (battleState.rounds.isBreak) {
                    // Break timer
                    battleState.rounds.breakTimeLeft--;
                    updateTimerDisplay();
                    
                    if (battleState.rounds.breakTimeLeft <= 0) {
                        // Break time over, start next round or end fight
                        endBreak();
                    }
                } else {
                    // Round timer
                    battleState.rounds.timeLeft--;
                    updateTimerDisplay();
                    
                    if (battleState.rounds.timeLeft <= 0) {
                        // Round time over
                        endRound();
                    }
                }
            }, 1000);
        }
        
        function updateTimerDisplay() {
            const timerContainer = document.getElementById('timerContainer');
            const roundDisplay = document.getElementById('roundDisplay');
            const championshipBelt = document.getElementById('championshipBelt');
            
            // Hide championship belt (removed from timer display)
            championshipBelt.classList.add('hidden');
            
            if (battleState.rounds.isBreak) {
                const minutes = Math.floor(battleState.rounds.breakTimeLeft / 60);
                const seconds = battleState.rounds.breakTimeLeft % 60;
                document.getElementById('breakTimer').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                // Break time: Red background, Green outline
                timerContainer.className = 'bg-red-800 rounded-lg p-3 border-2 border-green-500';
                
                // Championship rounds (4 & 5) show in gold during breaks
                if (battleState.rounds.current > 3) {
                    roundDisplay.className = 'text-yellow-400 font-bold text-lg';
                } else {
                    roundDisplay.className = 'text-green-400 font-bold text-lg';
                }
            } else {
                const minutes = Math.floor(battleState.rounds.timeLeft / 60);
                const seconds = battleState.rounds.timeLeft % 60;
                document.getElementById('timerDisplay').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                // Round active: Green background, Red outline
                timerContainer.className = 'bg-green-800 rounded-lg p-3 border-2 border-red-500';
                
                // Championship rounds (4 & 5) show in gold, regular rounds (1-3) in white
                if (battleState.rounds.current > 3) {
                    roundDisplay.className = 'text-yellow-400 font-bold text-lg';
                } else {
                    roundDisplay.className = 'text-white font-bold text-lg';
                }
                
                // Change timer text color based on time left
                const timerElement = document.getElementById('timerDisplay');
                if (battleState.rounds.timeLeft <= 30) {
                    timerElement.className = 'text-red-400 font-mono text-xl animate-pulse';
                } else if (battleState.rounds.timeLeft <= 60) {
                    timerElement.className = 'text-yellow-400 font-mono text-xl';
                } else {
                    timerElement.className = 'text-white font-mono text-xl';
                }
            }
        }
        
        function endRound() {
            if (battleState.battleEnded) return;
            
            addToBattleLog(`‚è∞ END OF ROUND ${battleState.rounds.current}!`, 'special');
            
            // Check if this was the final round
            if (battleState.rounds.current >= battleState.rounds.total) {
                // Fight goes to decision
                endFightByDecision();
                return;
            }
            
            // Start break period
            battleState.rounds.isBreak = true;
            battleState.rounds.breakTimeLeft = 60;
            battleState.rounds.current++;
            
            // Show corner break screen
            showCornerBreak();
        }
        
        function showCornerBreak() {
            document.getElementById('breakRoundNumber').textContent = battleState.rounds.current - 1;
            document.getElementById('cornerBreak').classList.remove('hidden');
            
            // Hide battle controls during break
            document.getElementById('battleActions').classList.add('hidden');
            hideSubMenus();
        }
        
        function selectCornerItem(itemType) {
            const playerBonus = battleState.cornerBonus.player;
            
            // Apply corner item effects
            switch (itemType) {
                case 'ice':
                    battleState.playerHealth = Math.min(100, battleState.playerHealth + 10);
                    playerBonus.nextStrikePower = 10;
                    addToBattleLog('üßä Ice applied! +10 HP, next strike gets +10 power!', 'special');
                    break;
                case 'water':
                    battleState.playerHealth = Math.min(100, battleState.playerHealth + 5);
                    playerBonus.nextStrikePower = 15;
                    addToBattleLog('üíß Water applied! +5 HP, next strike gets +15 power!', 'special');
                    break;
                case 'enswell':
                    battleState.playerHealth = Math.min(100, battleState.playerHealth + 20);
                    addToBattleLog('ü©π Enswell applied! +20 HP!', 'special');
                    break;
                case 'advice':
                    playerBonus.nextComboDouble = true;
                    addToBattleLog('üí≠ Advice received! Next combo will do double damage!', 'special');
                    break;
            }
            
            // Allow repeated use of corner items
            
            // End break and start next round
            endBreak();
        }
        
        function endBreak() {
            // Clear break timer
            if (battleState.rounds.timer) {
                clearInterval(battleState.rounds.timer);
            }
            
            // Hide corner break screen
            document.getElementById('cornerBreak').classList.add('hidden');
            
            // Check if player didn't select anything
            if (battleState.rounds.isBreak && battleState.cornerBonus.player.type === null) {
                addToBattleLog('üí™ Going in raw? Brave... or foolish?', 'special');
            }
            
            // Reset for next round
            battleState.rounds.isBreak = false;
            battleState.rounds.timeLeft = 180; // 3 minutes
            
            // Show battle controls
            document.getElementById('battleActions').classList.remove('hidden');
            
            // Start new round timer
            startRoundTimer();
            
            // Update UI
            updateBattleUI();
            
            addToBattleLog(`üîî ROUND ${battleState.rounds.current} BEGINS!`, 'special');
        }
        
        function endFightByDecision() {
            battleState.battleEnded = true;
            
            // Clear timer
            if (battleState.rounds.timer) {
                clearInterval(battleState.rounds.timer);
            }
            
            // Simple decision based on health remaining
            const playerHealthPercent = battleState.playerHealth / 100;
            const opponentHealthPercent = battleState.opponentHealth / 100;
            
            let result;
            if (playerHealthPercent > opponentHealthPercent) {
                result = 'win';
                addToBattleLog('üèÜ UNANIMOUS DECISION VICTORY! üèÜ', 'result');
            } else if (opponentHealthPercent > playerHealthPercent) {
                result = 'loss';
                addToBattleLog('üìâ UNANIMOUS DECISION LOSS üìâ', 'result');
            } else {
                result = 'draw';
                addToBattleLog('ü§ù MAJORITY DRAW ü§ù', 'result');
            }
            
            endBattle(result);
        }

        function updateBattleUI() {
            // Update player info
            document.getElementById('playerName').textContent = battleState.player.name;
            document.getElementById('playerFlag').textContent = battleState.player.flag;
            document.getElementById('playerHealthText').textContent = `${battleState.playerHealth}/100`;
            document.getElementById('playerHealthBar').style.width = `${battleState.playerHealth}%`;
            
            // Update opponent info
            document.getElementById('opponentName').textContent = battleState.opponent.name;
            document.getElementById('opponentFlag').textContent = battleState.opponent.flag;
            document.getElementById('opponentHealthText').textContent = `${battleState.opponentHealth}/100`;
            document.getElementById('opponentHealthBar').style.width = `${battleState.opponentHealth}%`;
            
            // Update round and timer info
            document.getElementById('roundDisplay').textContent = `ROUND ${battleState.rounds.current}`;
            document.getElementById('fightTypeDisplay').textContent = battleState.rounds.isChampionship ? 'Championship Fight' : 'Regular Fight';
            updateTimerDisplay();
            
            // Update distance tracker
            updateDistanceDisplay();
            
            // Update fight record
            document.getElementById('recordOpponent').textContent = battleState.opponent.name;
            document.getElementById('recordWins').textContent = fightRecord.wins;
            document.getElementById('recordLosses').textContent = fightRecord.losses;
            
            // Update combo displays
            updateComboDisplay();
            
            // Update health bar colors based on health percentage
            const playerHealthPercent = battleState.playerHealth;
            const opponentHealthPercent = battleState.opponentHealth;
            
            // Player health bar color
            if (playerHealthPercent > 60) {
                document.getElementById('playerHealthBar').className = 'bg-green-500 h-6 rounded-full transition-all duration-500';
            } else if (playerHealthPercent > 30) {
                document.getElementById('playerHealthBar').className = 'bg-yellow-500 h-6 rounded-full transition-all duration-500';
            } else {
                document.getElementById('playerHealthBar').className = 'bg-red-500 h-6 rounded-full transition-all duration-500';
            }
            
            // Opponent health bar color
            if (opponentHealthPercent > 60) {
                document.getElementById('opponentHealthBar').className = 'bg-green-500 h-6 rounded-full transition-all duration-500';
            } else if (opponentHealthPercent > 30) {
                document.getElementById('opponentHealthBar').className = 'bg-yellow-500 h-6 rounded-full transition-all duration-500';
            } else {
                document.getElementById('opponentHealthBar').className = 'bg-red-500 h-6 rounded-full transition-all duration-500';
            }
            
            // Update battle status only if battle hasn't ended
            if (!battleState.battleEnded && !battleState.rounds.isBreak) {
                if (battleState.currentTurn === 'player') {
                    document.getElementById('battleStatus').textContent = "Your Turn! Choose your action.";
                } else {
                    document.getElementById('battleStatus').textContent = "Opponent's Turn...";
                    // Don't auto-trigger opponent turn here - it's handled in processTurn
                }
            }
        }
        
        function updateDistanceDisplay() {
            const distanceTracker = document.getElementById('distanceTracker');
            
            // Update text display
            let distanceText = '';
            switch(battleState.distance) {
                case 'out-of-range':
                    distanceText = 'Out-of-Range';
                    break;
                case 'in-range':
                    distanceText = 'In-Range';
                    break;
                case 'in-fighting':
                    distanceText = 'In-Fighting';
                    break;
            }
            distanceTracker.textContent = distanceText;
            
            // Reset all dots to gray
            for (let i = 1; i <= 3; i++) {
                document.getElementById(`playerDot${i}`).className = 'w-3 h-3 rounded-full bg-gray-600 transition-all duration-300';
                document.getElementById(`opponentDot${i}`).className = 'w-3 h-3 rounded-full bg-gray-600 transition-all duration-300';
            }
            
            // Light up appropriate dots based on distance
            // Dot 1 = Out-of-Range (furthest from center)
            // Dot 2 = In-Range (middle)
            // Dot 3 = In-Fighting (closest to center)
            let activeDot = 2; // Default to in-range
            let dotColor = 'bg-yellow-400'; // Default color
            
            switch(battleState.distance) {
                case 'out-of-range':
                    activeDot = 1;
                    dotColor = 'bg-green-400';
                    break;
                case 'in-range':
                    activeDot = 2;
                    dotColor = 'bg-yellow-400';
                    break;
                case 'in-fighting':
                    activeDot = 3;
                    dotColor = 'bg-red-400';
                    break;
            }
            
            // Light up the active dots for both fighters
            document.getElementById(`playerDot${activeDot}`).className = `w-3 h-3 rounded-full ${dotColor} shadow-lg transition-all duration-300`;
            document.getElementById(`opponentDot${activeDot}`).className = `w-3 h-3 rounded-full ${dotColor} shadow-lg transition-all duration-300`;
        }
        
        function showAttackMenu() {
            hideSubMenus();
            document.getElementById('subMenu').classList.remove('hidden');
            document.getElementById('attackMenu').classList.remove('hidden');
        }
        
        function showDefenseMenu() {
            hideSubMenus();
            document.getElementById('subMenu').classList.remove('hidden');
            document.getElementById('defenseMenu').classList.remove('hidden');
        }
        
        function showClinchMenu() {
            hideSubMenus();
            document.getElementById('subMenu').classList.remove('hidden');
            document.getElementById('clinchMenu').classList.remove('hidden');
        }
        
        function showDistanceMenu() {
            hideSubMenus();
            document.getElementById('subMenu').classList.remove('hidden');
            document.getElementById('distanceMenu').classList.remove('hidden');
        }
        
        function hideSubMenus() {
            document.getElementById('subMenu').classList.add('hidden');
            document.getElementById('attackMenu').classList.add('hidden');
            document.getElementById('defenseMenu').classList.add('hidden');
            document.getElementById('clinchMenu').classList.add('hidden');
            document.getElementById('distanceMenu').classList.add('hidden');
        }
        
        function playerAttack(attackType) {
            console.log('Player attack called:', attackType, 'Turn:', battleState.currentTurn, 'Ended:', battleState.battleEnded);
            console.log('Player action already set:', battleState.playerAction);
            if (battleState.battleEnded || battleState.playerAction) {
                console.log('Attack blocked - battle ended or action already set');
                return;
            }
            
            battleState.playerAction = { type: 'attack', action: attackType };
            battleState.playerStats.attacks++;
            hideSubMenus();
            processTurn();
        }
        
        function playerDefense(defenseType) {
            console.log('Player defense called:', defenseType, 'Turn:', battleState.currentTurn, 'Ended:', battleState.battleEnded);
            console.log('Player action already set:', battleState.playerAction);
            if (battleState.battleEnded || battleState.playerAction) {
                console.log('Defense blocked - battle ended or action already set');
                return;
            }
            
            battleState.playerAction = { type: 'defense', action: defenseType };
            battleState.playerStats.defenses++;
            hideSubMenus();
            processTurn();
        }
        
        function playerClinch(clinchType) {
            console.log('Player clinch called:', clinchType, 'Turn:', battleState.currentTurn, 'Ended:', battleState.battleEnded);
            console.log('Player action already set:', battleState.playerAction);
            if (battleState.battleEnded || battleState.playerAction) {
                console.log('Clinch blocked - battle ended or action already set');
                return;
            }
            
            battleState.playerAction = { type: 'clinch', action: clinchType };
            hideSubMenus();
            processTurn();
        }
        
        function playerDistance(distanceType) {
            console.log('Player distance called:', distanceType, 'Turn:', battleState.currentTurn, 'Ended:', battleState.battleEnded);
            console.log('Player action already set:', battleState.playerAction);
            if (battleState.battleEnded || battleState.playerAction) {
                console.log('Distance blocked - battle ended or action already set');
                return;
            }
            
            battleState.playerAction = { type: 'distance', action: distanceType };
            hideSubMenus();
            processTurn();
        }
        
        function opponentTurn() {
            // Simple AI - random action selection
            const actionTypes = ['attack', 'defense', 'distance', 'clinch'];
            const actionType = actionTypes[Math.floor(Math.random() * actionTypes.length)];
            
            if (actionType === 'attack') {
                const attackTypes = Object.keys(attacks);
                const attack = attackTypes[Math.floor(Math.random() * attackTypes.length)];
                battleState.opponentAction = { type: 'attack', action: attack };
                battleState.opponentStats.attacks++;
            } else if (actionType === 'defense') {
                const defenseTypes = ['block', 'slip', 'parry', 'roll', 'pull', 'check'];
                const defense = defenseTypes[Math.floor(Math.random() * defenseTypes.length)];
                battleState.opponentAction = { type: 'defense', action: defense };
                battleState.opponentStats.defenses++;
            } else if (actionType === 'clinch') {
                const clinchTypes = ['setup', 'pummel', 'sweep', 'escape'];
                const clinch = clinchTypes[Math.floor(Math.random() * clinchTypes.length)];
                battleState.opponentAction = { type: 'clinch', action: clinch };
            } else {
                // Opponent can only use 'create' and 'cover' distance moves, not 'angle'
                const distanceTypes = ['create', 'cover'];
                const distance = distanceTypes[Math.floor(Math.random() * distanceTypes.length)];
                battleState.opponentAction = { type: 'distance', action: distance };
            }
            
            processTurn();
        }
        
        function processTurn() {
            // Check if this is a player bonus turn (player has bonus and just acted)
            if (battleState.turnBonus.player && battleState.playerAction && !battleState.opponentAction) {
                // Execute player's bonus turn immediately
                addToBattleLog(`${battleState.player.name} uses ${battleState.playerAction.type.toUpperCase()}: ${battleState.playerAction.action}`, 'player');
                addToBattleLog('‚ö° Player uses bonus turn!', 'special');
                
                // Process the bonus action immediately
                processBonusAction('player');
                
                // Clear bonus and action
                battleState.turnBonus.player = false;
                battleState.playerAction = null;
                
                // Update UI and check for battle end
                updateBattleUI();
                
                if (battleState.playerHealth <= 0) {
                    addToBattleLog(`üèÜ ${battleState.opponent.name} WINS BY KNOCKOUT! üèÜ`, 'result');
                    endBattle('loss');
                    return;
                } else if (battleState.opponentHealth <= 0) {
                    addToBattleLog(`üèÜ ${battleState.player.name} WINS BY KNOCKOUT! üèÜ`, 'result');
                    endBattle('win');
                    return;
                }
                
                // After bonus turn, continue with normal turn sequence
                battleState.currentTurn = 'opponent';
                updateBattleUI();
                setTimeout(() => {
                    if (battleState.currentTurn === 'opponent' && !battleState.battleEnded && !battleState.playerAction && !battleState.opponentAction) {
                        opponentTurn();
                    }
                }, 1000);
                return;
            }
            
            // If player just acted but opponent hasn't, trigger opponent turn
            if (battleState.playerAction && !battleState.opponentAction) {
                // Log player action immediately
                addToBattleLog(`${battleState.player.name} uses ${battleState.playerAction.type.toUpperCase()}: ${battleState.playerAction.action}`, 'player');
                
                // Update status and trigger opponent turn
                document.getElementById('battleStatus').textContent = "Opponent is choosing their move...";
                battleState.currentTurn = 'opponent';
                setTimeout(() => {
                    opponentTurn();
                }, 1000);
                return;
            }
            
            if (!battleState.playerAction || !battleState.opponentAction) return;
            
            // Log opponent's action (player action already logged above)
            addToBattleLog(`${battleState.opponent.name} uses ${battleState.opponentAction.type.toUpperCase()}: ${battleState.opponentAction.action}`, 'opponent');
            
            let battleLog = '';
            
            // Process actions based on type
            if (battleState.playerAction.type === 'attack' && battleState.opponentAction.type === 'attack') {
                // Both attacking - exchange
                battleLog = processExchange();
                battleState.playerStats.exchanges++;
                battleState.opponentStats.exchanges++;
            } else if (battleState.playerAction.type === 'attack' && battleState.opponentAction.type === 'defense') {
                // Player attacks, opponent defends
                battleLog = processAttackVsDefense(battleState.playerAction.action, battleState.opponentAction.action, 'player');
            } else if (battleState.playerAction.type === 'defense' && battleState.opponentAction.type === 'attack') {
                // Player defends, opponent attacks
                battleLog = processAttackVsDefense(battleState.opponentAction.action, battleState.playerAction.action, 'opponent');
            } else {
                // Other combinations
                battleLog = processOtherActions();
            }
            
            // Update UI and check for battle end
            updateBattleUI();
            
            if (battleState.playerHealth <= 0) {
                addToBattleLog(`üèÜ ${battleState.opponent.name} WINS BY KNOCKOUT! üèÜ`, 'result');
                endBattle('loss');
                return;
            } else if (battleState.opponentHealth <= 0) {
                addToBattleLog(`üèÜ ${battleState.player.name} WINS BY KNOCKOUT! üèÜ`, 'result');
                endBattle('win');
                return;
            }
            
            // Reset actions and continue
            battleState.playerAction = null;
            battleState.opponentAction = null;
            
            // Determine next turn (can be modified by special moves)
            // Handle conflicting bonuses - player gets priority in ties
            if (battleState.turnBonus.player && battleState.turnBonus.opponent) {
                // Both have bonuses - player goes first, then opponent gets theirs later
                battleState.currentTurn = 'player';
                battleState.turnBonus.opponent = false; // Clear opponent bonus for now
                addToBattleLog('‚ö° Both fighters earned bonus turns! Player goes first.', 'special');
            } else if (battleState.turnBonus.player) {
                battleState.currentTurn = 'player';
                // Don't clear bonus here - it will be cleared when used
                addToBattleLog('‚ö° Player gets bonus turn!', 'special');
            } else if (battleState.turnBonus.opponent) {
                battleState.currentTurn = 'opponent';
                battleState.turnBonus.opponent = false;
                addToBattleLog('‚ö° Opponent gets bonus turn!', 'special');
                // Immediately trigger opponent bonus turn
                setTimeout(() => {
                    if (battleState.currentTurn === 'opponent' && !battleState.battleEnded && !battleState.playerAction && !battleState.opponentAction) {
                        opponentTurn();
                    }
                }, 1000);
                updateBattleUI();
                return; // Exit early to prevent normal turn handling
            } else {
                // Normal turn alternation
                battleState.currentTurn = battleState.currentTurn === 'player' ? 'opponent' : 'player';
            }
            
            updateBattleUI();
            
            // Always trigger opponent turn if it's their turn, regardless of how they got it
            if (battleState.currentTurn === 'opponent' && !battleState.battleEnded) {
                setTimeout(() => {
                    // Double-check the turn is still opponent's and battle hasn't ended
                    if (battleState.currentTurn === 'opponent' && !battleState.battleEnded && !battleState.playerAction && !battleState.opponentAction) {
                        opponentTurn();
                    }
                }, 1500);
            }
        }
        
        // Process bonus actions immediately without waiting for opponent
        function processBonusAction(actor) {
            const action = actor === 'player' ? battleState.playerAction : battleState.opponentAction;
            const actorName = actor === 'player' ? battleState.player.name : battleState.opponent.name;
            
            if (action.type === 'attack') {
                // Process attack directly against opponent
                let damage = attacks[action.action].power;
                
                // Apply combo damage
                const actorCombo = actor === 'player' ? battleState.combo.player : battleState.combo.opponent;
                damage = calculateComboDamage(damage, actorCombo, actor);
                
                // Apply corner bonuses
                if (battleState.cornerBonus[actor].nextStrikePower > 0) {
                    damage += battleState.cornerBonus[actor].nextStrikePower;
                    addToBattleLog(`${actorName} uses corner bonus! (+${battleState.cornerBonus[actor].nextStrikePower} power)`, 'special');
                    battleState.cornerBonus[actor].nextStrikePower = 0;
                }
                
                // Apply angle bonus
                if (battleState.angleBonus[actor]) {
                    if (battleState.angleBonus[actor] === 'clinch' && action.action === 'knee') {
                        damage *= 3;
                        addToBattleLog(`${actorName} gets clinch angle bonus with knee! (3x damage)`, 'special');
                    } else if (battleState.angleBonus[actor] === 'clinch') {
                        damage *= 2;
                        addToBattleLog(`${actorName} gets clinch angle bonus! (2x damage)`, 'special');
                    } else {
                        damage *= 2;
                        addToBattleLog(`${actorName} gets angle bonus! (2x damage)`, 'special');
                    }
                    battleState.angleBonus[actor] = false;
                }
                
                // Apply clinch modifiers
                if (battleState.clinch.active) {
                    const attackType = attacks[action.action];
                    if (battleState.clinch.dominant === actor) {
                        if (attackType.type === 'knee' || attackType.type === 'elbow') {
                            damage *= 2;
                            addToBattleLog(`${actorName} dominates clinch with ${attackType.type}! (2x damage)`, 'special');
                        } else if (attackType.type === 'punch' || attackType.type === 'kick') {
                            damage *= 0.5;
                            addToBattleLog(`${actorName}'s ${attackType.type} is restricted in clinch (0.5x damage)`, 'special');
                        }
                    } else if (battleState.clinch.dominant !== null && battleState.clinch.dominant !== actor) {
                        damage *= 0.5;
                        addToBattleLog(`${actorName} is dominated in clinch! (0.5x damage)`, 'special');
                    }
                }
                
                // Apply damage
                if (actor === 'player') {
                    const oldHealth = battleState.opponentHealth;
                    battleState.opponentHealth = Math.max(0, battleState.opponentHealth - damage);
                    const actualDamage = oldHealth - battleState.opponentHealth;
                    
                    updateComboSystem('player', actualDamage > 0);
                    
                    if (actualDamage > 0) {
                        if (battleState.opponentHealth === 0) {
                            addToBattleLog(`üí• ${actorName} lands finishing blow for ${actualDamage} damage!`, 'damage');
                        } else {
                            addToBattleLog(`üí• ${actorName} lands clean hit for ${actualDamage} damage!`, 'damage');
                        }
                    }
                } else {
                    const oldHealth = battleState.playerHealth;
                    battleState.playerHealth = Math.max(0, battleState.playerHealth - damage);
                    const actualDamage = oldHealth - battleState.playerHealth;
                    
                    updateComboSystem('opponent', actualDamage > 0);
                    
                    if (actualDamage > 0) {
                        if (battleState.playerHealth === 0) {
                            addToBattleLog(`üí• ${actorName} lands finishing blow for ${actualDamage} damage!`, 'damage');
                        } else {
                            addToBattleLog(`üí• ${actorName} lands clean hit for ${actualDamage} damage!`, 'damage');
                        }
                    }
                }
            } else if (action.type === 'distance') {
                processDistanceAction(action.action, actor);
            } else if (action.type === 'clinch') {
                processClinchAction(action.action, actor);
            } else if (action.type === 'defense') {
                // Defensive bonus turns just reset position
                addToBattleLog(`${actorName} uses defensive positioning`, 'special');
            }
        }
        
        // Additional safety function to ensure opponent turns are triggered
        function ensureOpponentTurn() {
            if (battleState.currentTurn === 'opponent' && !battleState.battleEnded && !battleState.playerAction && !battleState.opponentAction) {
                setTimeout(() => {
                    if (battleState.currentTurn === 'opponent' && !battleState.battleEnded && !battleState.playerAction && !battleState.opponentAction) {
                        opponentTurn();
                    }
                }, 500);
            }
        }
        
        function calculateComboDamage(baseDamage, comboCount, attacker = null) {
            if (comboCount === 0) return baseDamage;
            
            // Each combo level adds +2 damage, plus special bonus at x10
            let comboDamage = comboCount * 2;
            
            // Apply advice bonus (double combo damage)
            if (attacker && battleState.cornerBonus[attacker].nextComboDouble) {
                comboDamage *= 2;
                battleState.cornerBonus[attacker].nextComboDouble = false;
                const attackerName = attacker === 'player' ? battleState.player.name : battleState.opponent.name;
                addToBattleLog(`üí≠ ${attackerName} uses corner advice! Combo damage doubled!`, 'special');
            }
            
            // Special x10 combo bonus: +10 extra damage on top of the combo damage
            if (comboCount >= 10) {
                comboDamage += 10;
            }
            
            return baseDamage + comboDamage;
        }
        
        function updateComboSystem(attacker, attackSuccessful) {
            if (attackSuccessful) {
                if (battleState.combo.lastSuccessfulAttacker === attacker) {
                    // Continue combo
                    battleState.combo[attacker]++;
                } else {
                    // Start new combo
                    battleState.combo[attacker] = 1;
                    // Reset opponent's combo
                    const opponent = attacker === 'player' ? 'opponent' : 'player';
                    battleState.combo[opponent] = 0;
                }
                battleState.combo.lastSuccessfulAttacker = attacker;
                
                // Log combo achievement
                const attackerName = attacker === 'player' ? battleState.player.name : battleState.opponent.name;
                const comboCount = battleState.combo[attacker];
                
                if (comboCount >= 10) {
                    addToBattleLog(`üî•üî• ${attackerName} achieves LEGENDARY x${comboCount} COMBO! (+${comboCount * 2 + 10} damage!) üî•üî•`, 'special');
                } else if (comboCount >= 5) {
                    addToBattleLog(`üî• ${attackerName} builds x${comboCount} COMBO! (+${comboCount * 2} damage!)`, 'special');
                } else if (comboCount >= 2) {
                    addToBattleLog(`‚ö° ${attackerName} continues x${comboCount} combo! (+${comboCount * 2} damage!)`, 'special');
                }
            } else {
                // Attack failed, reset attacker's combo
                if (battleState.combo.lastSuccessfulAttacker === attacker) {
                    battleState.combo[attacker] = 0;
                    battleState.combo.lastSuccessfulAttacker = null;
                    
                    const attackerName = attacker === 'player' ? battleState.player.name : battleState.opponent.name;
                    addToBattleLog(`üíî ${attackerName}'s combo is broken!`, 'special');
                }
            }
        }
        
        function addToBattleLog(message, type = 'normal') {
            const logContent = document.getElementById('battleLogContent');
            const logEntry = document.createElement('div');
            
            // Style based on message type
            switch(type) {
                case 'player':
                    logEntry.className = 'text-blue-400 font-semibold';
                    break;
                case 'opponent':
                    logEntry.className = 'text-red-400 font-semibold';
                    break;
                case 'damage':
                    logEntry.className = 'text-yellow-300 font-bold';
                    break;
                case 'result':
                    logEntry.className = 'text-green-400 font-bold text-center';
                    break;
                case 'special':
                    logEntry.className = 'text-purple-400 font-semibold';
                    break;
                default:
                    logEntry.className = 'text-gray-300';
            }
            
            logEntry.textContent = message;
            logContent.appendChild(logEntry);
            
            // Auto-scroll to bottom
            logContent.scrollTop = logContent.scrollHeight;
        }
        
        function processExchange() {
            const playerAttack = attacks[battleState.playerAction.action];
            const opponentAttack = attacks[battleState.opponentAction.action];
            
            let playerDamage = playerAttack.power;
            let opponentDamage = opponentAttack.power;
            
            // Apply combo damage first (before other modifiers)
            playerDamage = calculateComboDamage(playerDamage, battleState.combo.player, 'player');
            opponentDamage = calculateComboDamage(opponentDamage, battleState.combo.opponent, 'opponent');
            
            // Apply corner bonuses
            if (battleState.cornerBonus.player.nextStrikePower > 0) {
                playerDamage += battleState.cornerBonus.player.nextStrikePower;
                addToBattleLog(`${battleState.player.name} uses corner bonus! (+${battleState.cornerBonus.player.nextStrikePower} power)`, 'special');
                battleState.cornerBonus.player.nextStrikePower = 0;
            }
            if (battleState.cornerBonus.opponent.nextStrikePower > 0) {
                opponentDamage += battleState.cornerBonus.opponent.nextStrikePower;
                addToBattleLog(`${battleState.opponent.name} uses corner bonus! (+${battleState.cornerBonus.opponent.nextStrikePower} power)`, 'special');
                battleState.cornerBonus.opponent.nextStrikePower = 0;
            }
            
            // Apply angle bonuses
            if (battleState.angleBonus.player) {
                playerDamage *= 2;
                addToBattleLog(`${battleState.player.name} gets angle bonus! (2x damage)`, 'special');
                battleState.angleBonus.player = false;
            }
            if (battleState.angleBonus.opponent) {
                opponentDamage *= 2;
                addToBattleLog(`${battleState.opponent.name} gets angle bonus! (2x damage)`, 'special');
                battleState.angleBonus.opponent = false;
            }
            
            // Apply clinch damage modifiers
            if (battleState.clinch.active) {
                // Player damage modifiers
                if (battleState.clinch.dominant === 'player') {
                    // Player dominates clinch
                    if (playerAttack.type === 'knee' || playerAttack.type === 'elbow') {
                        playerDamage *= 2;
                        addToBattleLog(`${battleState.player.name} dominates clinch with ${playerAttack.type}! (2x damage)`, 'special');
                    } else if (playerAttack.type === 'punch' || playerAttack.type === 'kick') {
                        playerDamage *= 0.5;
                        addToBattleLog(`${battleState.player.name}'s ${playerAttack.type} is restricted in clinch (0.5x damage)`, 'special');
                    }
                } else if (battleState.clinch.dominant === 'opponent') {
                    // Player is being dominated
                    playerDamage *= 0.5;
                    addToBattleLog(`${battleState.player.name} is dominated in clinch! (0.5x damage)`, 'special');
                }
                
                // Opponent damage modifiers
                if (battleState.clinch.dominant === 'opponent') {
                    // Opponent dominates clinch
                    if (opponentAttack.type === 'knee' || opponentAttack.type === 'elbow') {
                        opponentDamage *= 2;
                        addToBattleLog(`${battleState.opponent.name} dominates clinch with ${opponentAttack.type}! (2x damage)`, 'special');
                    } else if (opponentAttack.type === 'punch' || opponentAttack.type === 'kick') {
                        opponentDamage *= 0.5;
                        addToBattleLog(`${battleState.opponent.name}'s ${opponentAttack.type} is restricted in clinch (0.5x damage)`, 'special');
                    }
                } else if (battleState.clinch.dominant === 'player') {
                    // Opponent is being dominated
                    opponentDamage *= 0.5;
                    addToBattleLog(`${battleState.opponent.name} is dominated in clinch! (0.5x damage)`, 'special');
                }
            }
            
            // Calculate actual damage dealt (ensuring health doesn't go below 0)
            const oldPlayerHealth = battleState.playerHealth;
            const oldOpponentHealth = battleState.opponentHealth;
            
            battleState.playerHealth = Math.max(0, battleState.playerHealth - opponentDamage);
            battleState.opponentHealth = Math.max(0, battleState.opponentHealth - playerDamage);
            
            const actualPlayerDamage = oldOpponentHealth - battleState.opponentHealth;
            const actualOpponentDamage = oldPlayerHealth - battleState.playerHealth;
            
            // Update combo system for both fighters (both attacks successful in exchange)
            updateComboSystem('player', actualPlayerDamage > 0);
            updateComboSystem('opponent', actualOpponentDamage > 0);
            
            // Log the exchange results
            addToBattleLog(`üí• EXCHANGE! Both fighters land their attacks!`, 'damage');
            if (actualPlayerDamage > 0) {
                if (battleState.opponentHealth === 0) {
                    addToBattleLog(`${battleState.player.name} lands finishing blow for ${actualPlayerDamage} damage!`, 'damage');
                } else {
                    addToBattleLog(`${battleState.player.name} deals ${actualPlayerDamage} damage`, 'damage');
                }
            }
            if (actualOpponentDamage > 0) {
                if (battleState.playerHealth === 0) {
                    addToBattleLog(`${battleState.opponent.name} lands finishing blow for ${actualOpponentDamage} damage!`, 'damage');
                } else {
                    addToBattleLog(`${battleState.opponent.name} deals ${actualOpponentDamage} damage`, 'damage');
                }
            }
            
            return `Exchange! Both fighters land their attacks.`;
        }
        
        function processAttackVsDefense(attackType, defenseType, attacker) {
            const attack = attacks[attackType];
            let damage = attack.power;
            let blocked = false;
            let specialEffect = '';
            
            // Apply combo damage first
            const attackerCombo = attacker === 'player' ? battleState.combo.player : battleState.combo.opponent;
            damage = calculateComboDamage(damage, attackerCombo, attacker);
            
            // Apply corner bonuses
            if (battleState.cornerBonus[attacker].nextStrikePower > 0) {
                damage += battleState.cornerBonus[attacker].nextStrikePower;
                const attackerName = attacker === 'player' ? battleState.player.name : battleState.opponent.name;
                addToBattleLog(`${attackerName} uses corner bonus! (+${battleState.cornerBonus[attacker].nextStrikePower} power)`, 'special');
                battleState.cornerBonus[attacker].nextStrikePower = 0;
            }
            
            // Apply clinch damage modifiers
            if (battleState.clinch.active) {
                if (battleState.clinch.dominant === attacker) {
                    // Attacker dominates clinch
                    if (attack.type === 'knee' || attack.type === 'elbow') {
                        damage *= 2;
                        const attackerName = attacker === 'player' ? battleState.player.name : battleState.opponent.name;
                        addToBattleLog(`${attackerName} dominates clinch with ${attack.type}! (2x damage)`, 'special');
                    } else if (attack.type === 'punch' || attack.type === 'kick') {
                        damage *= 0.5;
                        const attackerName = attacker === 'player' ? battleState.player.name : battleState.opponent.name;
                        addToBattleLog(`${attackerName}'s ${attack.type} is restricted in clinch (0.5x damage)`, 'special');
                    }
                } else if (battleState.clinch.dominant !== null && battleState.clinch.dominant !== attacker) {
                    // Attacker is being dominated
                    damage *= 0.5;
                    const attackerName = attacker === 'player' ? battleState.player.name : battleState.opponent.name;
                    addToBattleLog(`${attackerName} is dominated in clinch! (0.5x damage)`, 'special');
                }
            }
            
            // Apply defense modifiers
            switch (defenseType) {
                case 'block':
                    damage = Math.max(0, damage - 1);
                    specialEffect = 'Blocked! (-1 damage)';
                    break;
                case 'slip':
                    if (attackType === 'jab' || attackType === 'cross') {
                        damage = 0;
                        blocked = true;
                        specialEffect = 'Perfect slip! No damage!';
                    } else if (attackType === 'hook' || attackType === 'uppercut') {
                        damage = Math.max(0, damage - 1);
                        specialEffect = 'Partial slip! (-1 damage)';
                    } else {
                        specialEffect = 'Slip ineffective against this attack!';
                    }
                    break;
                case 'parry':
                    if (attackType === 'jab' || attackType === 'cross' || attackType === 'teep') {
                        damage = 0;
                        blocked = true;
                        specialEffect = 'Perfect parry! No damage!';
                    } else {
                        damage = Math.max(0, damage - 1);
                        specialEffect = 'Partial parry! (-1 damage)';
                    }
                    break;
                case 'roll':
                    if (attackType === 'hook' || attackType === 'roundkick') {
                        damage = 0;
                        blocked = true;
                        specialEffect = 'Perfect roll! No damage!';
                    } else if (attackType === 'uppercut') {
                        damage *= 2;
                        specialEffect = 'Roll backfires! (2x damage)';
                    } else {
                        damage = Math.max(0, damage - 2);
                        specialEffect = 'Good roll! (-2 damage)';
                    }
                    break;
                case 'pull':
                    damage = 0;
                    blocked = true;
                    if (attacker === 'player') {
                        specialEffect = 'Pull counter! Gains extra turn!';
                        battleState.turnBonus.opponent = true;
                    } else {
                        specialEffect = 'Pull counter! No bonus turn for opponent.';
                        // Don't give opponent bonus turn to prevent game breaking
                    }
                    break;
                case 'check':
                    if (attackType === 'roundkick') {
                        damage = 0;
                        blocked = true;
                        specialEffect = 'Perfect check! No damage!';
                    } else if (attackType === 'teep') {
                        damage = 0;
                        specialEffect = 'Check absorbs teep!';
                    } else {
                        specialEffect = 'Check ineffective against this attack!';
                    }
                    break;
            }
            
            // Apply damage and ensure health doesn't go below 0
            if (attacker === 'player') {
                const oldHealth = battleState.opponentHealth;
                battleState.opponentHealth = Math.max(0, battleState.opponentHealth - damage);
                const actualDamage = oldHealth - battleState.opponentHealth;
                
                // Update combo system
                updateComboSystem('player', actualDamage > 0 && !blocked);
                
                if (blocked) {
                    addToBattleLog(`üõ°Ô∏è ${battleState.opponent.name} perfectly defends! ${specialEffect}`, 'special');
                } else if (actualDamage > 0) {
                    if (battleState.opponentHealth === 0) {
                        addToBattleLog(`üí• ${battleState.player.name} lands finishing blow for ${actualDamage} damage!`, 'damage');
                    } else if (damage === attack.power) {
                        addToBattleLog(`üí• ${battleState.player.name} lands clean hit for ${actualDamage} damage!`, 'damage');
                    } else {
                        addToBattleLog(`‚öîÔ∏è ${battleState.player.name} deals ${actualDamage} damage! ${specialEffect}`, 'damage');
                    }
                } else {
                    addToBattleLog(`üõ°Ô∏è ${battleState.opponent.name} blocks all damage! ${specialEffect}`, 'special');
                }
            } else {
                const oldHealth = battleState.playerHealth;
                battleState.playerHealth = Math.max(0, battleState.playerHealth - damage);
                const actualDamage = oldHealth - battleState.playerHealth;
                
                // Update combo system
                updateComboSystem('opponent', actualDamage > 0 && !blocked);
                
                if (blocked) {
                    addToBattleLog(`üõ°Ô∏è ${battleState.player.name} perfectly defends! ${specialEffect}`, 'special');
                } else if (actualDamage > 0) {
                    if (battleState.playerHealth === 0) {
                        addToBattleLog(`üí• ${battleState.opponent.name} lands finishing blow for ${actualDamage} damage!`, 'damage');
                    } else if (damage === attack.power) {
                        addToBattleLog(`üí• ${battleState.opponent.name} lands clean hit for ${actualDamage} damage!`, 'damage');
                    } else {
                        addToBattleLog(`‚öîÔ∏è ${battleState.opponent.name} deals ${actualDamage} damage! ${specialEffect}`, 'damage');
                    }
                } else {
                    addToBattleLog(`üõ°Ô∏è ${battleState.player.name} blocks all damage! ${specialEffect}`, 'special');
                }
            }
            
            return blocked ? `Perfect defense!` : `Attack partially blocked.`;
        }
        
        function processOtherActions() {
            // Handle distance management, clinch actions, etc.
            if (battleState.playerAction.type === 'distance') {
                processDistanceAction(battleState.playerAction.action, 'player');
            }
            if (battleState.opponentAction.type === 'distance') {
                processDistanceAction(battleState.opponentAction.action, 'opponent');
            }
            if (battleState.playerAction.type === 'clinch') {
                processClinchAction(battleState.playerAction.action, 'player');
            }
            if (battleState.opponentAction.type === 'clinch') {
                processClinchAction(battleState.opponentAction.action, 'opponent');
            }
            
            // Handle defense vs defense (both defensive)
            if (battleState.playerAction.type === 'defense' && battleState.opponentAction.type === 'defense') {
                addToBattleLog('üìè Both fighters stay defensive and reset position', 'normal');
            }
            
            return 'Actions processed.';
        }
        
        function processDistanceAction(action, actor) {
            const actorName = actor === 'player' ? battleState.player.name : battleState.opponent.name;
            
            // Check if actor is being dominated in clinch
            if (battleState.clinch.active && battleState.clinch.dominant !== actor && battleState.clinch.dominant !== null) {
                const dominantName = battleState.clinch.dominant === 'player' ? battleState.player.name : battleState.opponent.name;
                addToBattleLog(`ü§º ${actorName} cannot move! ${dominantName} controls the clinch!`, 'special');
                
                // If opponent is blocked, give player a bonus turn
                if (actor === 'opponent') {
                    battleState.turnBonus.player = true;
                }
                return;
            }
            
            switch (action) {
                case 'create':
                    // If in clinch but not being dominated, can break out
                    if (battleState.clinch.active && battleState.clinch.dominant === actor) {
                        battleState.distance = 'in-range';
                        battleState.clinch.active = false;
                        battleState.clinch.dominant = null;
                        addToBattleLog(`üìè ${actorName} breaks clinch and creates space! Distance: In-Range`, 'special');
                    } else if (battleState.distance === 'in-fighting' && !battleState.clinch.active) {
                        battleState.distance = 'in-range';
                        addToBattleLog(`üìè ${actorName} creates space! Distance: In-Range`, 'special');
                    } else if (battleState.distance === 'in-range') {
                        battleState.distance = 'out-of-range';
                        addToBattleLog(`üìè ${actorName} creates space! Distance: Out-of-Range`, 'special');
                    } else {
                        addToBattleLog(`üìè ${actorName} tries to create space but already at max distance`, 'normal');
                    }
                    break;
                case 'cover':
                    if (battleState.distance === 'out-of-range') {
                        battleState.distance = 'in-range';
                        addToBattleLog(`üìè ${actorName} closes distance! Distance: In-Range`, 'special');
                    } else if (battleState.distance === 'in-range') {
                        battleState.distance = 'in-fighting';
                        addToBattleLog(`üìè ${actorName} closes distance! Distance: In-Fighting`, 'special');
                    } else {
                        addToBattleLog(`üìè ${actorName} tries to close distance but already in close`, 'normal');
                    }
                    break;
                case 'angle':
                    // Cannot create angles while being controlled in clinch
                    if (Math.random() < 0.5) {
                        if (actor === 'player') {
                            battleState.turnBonus.player = true;
                            battleState.angleBonus.player = true;
                        } else {
                            battleState.turnBonus.opponent = true;
                            battleState.angleBonus.opponent = true;
                        }
                        addToBattleLog(`üìê ${actorName} successfully creates angle! Gets bonus turn and 2x damage!`, 'special');
                    } else {
                        addToBattleLog(`üìê ${actorName} attempts to create angle but fails`, 'normal');
                    }
                    break;
            }
        }
        
        function processClinchAction(action, actor) {
            const actorName = actor === 'player' ? battleState.player.name : battleState.opponent.name;
            
            switch (action) {
                case 'setup':
                    if (battleState.distance === 'in-fighting') {
                        battleState.clinch.active = true;
                        battleState.clinch.dominant = actor;
                        addToBattleLog(`ü§º ${actorName} establishes clinch dominance!`, 'special');
                    } else {
                        addToBattleLog(`ü§º ${actorName} tries to clinch but not in range!`, 'normal');
                    }
                    break;
                case 'pummel':
                    if (battleState.clinch.active) {
                        if (Math.random() < 0.6) {
                            battleState.clinch.dominant = actor;
                            addToBattleLog(`ü§º ${actorName} wins the pummel and gains clinch control!`, 'special');
                        } else {
                            addToBattleLog(`ü§º ${actorName} attempts to pummel but fails`, 'normal');
                        }
                    } else {
                        addToBattleLog(`ü§º ${actorName} tries to pummel but no clinch active!`, 'normal');
                    }
                    break;
                case 'sweep':
                    if (battleState.clinch.active && battleState.clinch.dominant === actor) {
                        const opponent = actor === 'player' ? 'opponent' : 'player';
                        const opponentName = opponent === 'player' ? battleState.player.name : battleState.opponent.name;
                        if (opponent === 'player') {
                            battleState.playerHealth = Math.max(0, battleState.playerHealth - 3);
                        } else {
                            battleState.opponentHealth = Math.max(0, battleState.opponentHealth - 3);
                        }
                        addToBattleLog(`ü§º ${actorName} sweeps ${opponentName} for 3 damage!`, 'damage');
                    } else {
                        addToBattleLog(`ü§º ${actorName} tries to sweep but doesn't control clinch!`, 'normal');
                    }
                    break;
                case 'escape':
                    if (battleState.clinch.active) {
                        battleState.clinch.active = false;
                        battleState.clinch.dominant = null;
                        battleState.distance = 'in-range';
                        addToBattleLog(`üèÉ ${actorName} breaks free from the clinch! Distance: In-Range`, 'special');
                    } else {
                        addToBattleLog(`üèÉ ${actorName} tries to escape but no clinch is active!`, 'normal');
                    }
                    break;
            }
        }

        // Battle end and rematch functions
        function endBattle(result) {
            battleState.battleEnded = true;
            
            // Clear any active timers
            if (battleState.rounds.timer) {
                clearInterval(battleState.rounds.timer);
                battleState.rounds.timer = null;
            }
            
            // Calculate payout if this was from a fight offer
            let payoutMessage = '';
            if (battleState.selectedOffer) {
                const offer = battleState.selectedOffer;
                let totalEarned = offer.showMoney; // Always get show money
                
                if (result === 'win') {
                    totalEarned += offer.winBonus;
                    
                    // Check for KO bonus (opponent health at 0)
                    if (battleState.opponentHealth === 0) {
                        totalEarned += offer.koBonus;
                        payoutMessage = `üí∞ PAYOUT: $${totalEarned.toLocaleString()} (Show: $${offer.showMoney.toLocaleString()} + Win: $${offer.winBonus.toLocaleString()} + KO Bonus: $${offer.koBonus.toLocaleString()})`;
                    } else {
                        payoutMessage = `üí∞ PAYOUT: $${totalEarned.toLocaleString()} (Show: $${offer.showMoney.toLocaleString()} + Win: $${offer.winBonus.toLocaleString()})`;
                    }
                } else {
                    payoutMessage = `üí∞ PAYOUT: $${totalEarned.toLocaleString()} (Show Money Only)`;
                }
                
                // Update game data with earnings
                if (gameData && gameData.progress) {
                    if (!gameData.progress.totalEarnings) {
                        gameData.progress.totalEarnings = 0;
                    }
                    gameData.progress.totalEarnings += totalEarned;
                }
            }
            
            // Update fight record
            if (result === 'win') {
                fightRecord.wins++;
                // Update game data if it exists
                if (gameData && gameData.progress) {
                    gameData.progress.wins++;
                    localStorage.setItem('muayThaiGame', JSON.stringify(gameData));
                }
            } else {
                fightRecord.losses++;
                // Update game data if it exists
                if (gameData && gameData.progress) {
                    gameData.progress.losses++;
                    localStorage.setItem('muayThaiGame', JSON.stringify(gameData));
                }
            }
            
            // Hide battle controls
            document.getElementById('battleActions').classList.add('hidden');
            document.getElementById('normalExitButtons').classList.add('hidden');
            hideSubMenus();
            
            // Show result screen
            const resultScreen = document.getElementById('battleResult');
            const resultTitle = document.getElementById('resultTitle');
            const resultMessage = document.getElementById('resultMessage');
            const resultButtons = document.getElementById('resultButtons');
            
            if (result === 'win') {
                resultTitle.textContent = 'üèÜ YOU WIN! üèÜ';
                resultTitle.className = 'text-4xl font-black mb-6 text-green-400';
                let message = `Congratulations! You defeated ${battleState.opponent.name}!`;
                if (payoutMessage) {
                    message += `\n\n${payoutMessage}`;
                }
                resultMessage.textContent = message;
                
                resultButtons.innerHTML = `
                    <button onclick="rematchFight()" class="w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-500 hover:to-green-600 text-white font-bold py-3 px-6 rounded-lg glow transition-all duration-300">
                        üîÑ REMATCH
                    </button>
                    ${gameData ? `<button onclick="returnToSocialMedia()" class="w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300">
                        üì± BACK TO SOCIAL
                    </button>` : ''}
                    <button onclick="showPage('characterSelect')" class="w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300">
                        üë• SELECT NEW FIGHTERS
                    </button>
                    <button onclick="showPage('mainMenu')" class="w-full bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-500 hover:to-gray-600 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300">
                        üè† EXIT TO MENU
                    </button>
                `;
            } else {
                resultTitle.textContent = 'üíÄ YOU LOSE üíÄ';
                resultTitle.className = 'text-4xl font-black mb-6 text-red-400';
                let message = `${battleState.opponent.name} knocked you out! Try again?`;
                if (payoutMessage) {
                    message += `\n\n${payoutMessage}`;
                }
                resultMessage.textContent = message;
                
                resultButtons.innerHTML = `
                    <button onclick="rematchFight()" class="w-full bg-gradient-to-r from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 text-white font-bold py-3 px-6 rounded-lg glow transition-all duration-300">
                        üîÑ REMATCH
                    </button>
                    ${gameData ? `<button onclick="returnToSocialMedia()" class="w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300">
                        üì± BACK TO SOCIAL
                    </button>` : ''}
                    <button onclick="showPage('mainMenu')" class="w-full bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-500 hover:to-gray-600 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300">
                        üè† EXIT TO MENU
                    </button>
                `;
            }
            
            resultScreen.classList.remove('hidden');
        }
        
        function rematchFight() {
            // Restart the same fight with same settings
            const wasChampionship = battleState.rounds.isChampionship;
            initializeBattle(battleState.player, battleState.opponent, wasChampionship);
        }
        
        function returnToSocialMedia() {
            // Generate a new fight offer when returning to social media
            socialMediaInitialized = false;
            showPage('socialMedia');
        }
        
        // Social Media Interaction Functions
        function generateSocialMessages() {
            socialMessages = [];
            
            // Generate random messages from fans, haters, and other fighters
            const messageTypes = ['fan', 'hater', 'fighter', 'gym'];
            const numMessages = Math.floor(Math.random() * 3) + 2; // 2-4 messages
            
            for (let i = 0; i < numMessages; i++) {
                const type = messageTypes[Math.floor(Math.random() * messageTypes.length)];
                socialMessages.push(generateMessage(type));
            }
        }
        
        function generateMessage(type) {
            const messageId = Date.now() + Math.random();
            
            switch (type) {
                case 'fan':
                    return {
                        id: messageId,
                        type: 'fan',
                        sender: generateFanName(),
                        avatar: 'üòç',
                        message: getFanMessage(),
                        time: getRandomTime(),
                        canReply: true,
                        canBlock: true,
                        canDelete: true
                    };
                case 'hater':
                    return {
                        id: messageId,
                        type: 'hater',
                        sender: generateHaterName(),
                        avatar: 'üò§',
                        message: getHaterMessage(),
                        time: getRandomTime(),
                        canReply: true,
                        canBlock: true,
                        canDelete: true
                    };
                case 'fighter':
                    const fighter = fighters[Math.floor(Math.random() * fighters.length)];
                    return {
                        id: messageId,
                        type: 'fighter',
                        sender: fighter.name,
                        avatar: fighter.flag,
                        message: getFighterMessage(),
                        time: getRandomTime(),
                        canReply: true,
                        canBlock: false,
                        canDelete: true
                    };
                case 'gym':
                    return {
                        id: messageId,
                        type: 'gym',
                        sender: generateGymName(),
                        avatar: 'üèüÔ∏è',
                        message: getGymMessage(),
                        time: getRandomTime(),
                        canReply: true,
                        canBlock: false,
                        canDelete: true
                    };
            }
        }
        
        function generateFanName() {
            const names = ['MuayThaiLover', 'FightFan2024', 'ThaiBoxingFan', 'KneeStrike', 'ElbowMaster', 'ClinchKing', 'RingWarrior'];
            return names[Math.floor(Math.random() * names.length)];
        }
        
        function generateHaterName() {
            const names = ['TrollFighter', 'HaterGonnaHate', 'FakeChamp', 'OverratedFighter', 'NoSkillsNeeded', 'LuckyPuncher'];
            return names[Math.floor(Math.random() * names.length)];
        }
        
        function generateGymName() {
            const gyms = ['Tiger Muay Thai', 'Fairtex Training Center', 'Sitsongpeenong', 'Petchyindee Academy', 'Banchamek Gym', 'Jockeygym'];
            return gyms[Math.floor(Math.random() * gyms.length)];
        }
        
        function getFanMessage() {
            const messages = [
                "You're amazing! Keep up the great work! üî•",
                "Watched your last fight, incredible technique! üëè",
                "You inspire me to train harder every day! üí™",
                "Can't wait to see you fight again! When's the next one?",
                "Your clinch game is on another level! ü§º",
                "Been following you since day one, so proud! ‚ù§Ô∏è",
                "That last knockout was INSANE! üí•"
            ];
            return messages[Math.floor(Math.random() * messages.length)];
        }
        
        function getHaterMessage() {
            const messages = [
                "You got lucky in your last fight, won't happen again üòè",
                "Overrated fighter, all hype no skill üôÑ",
                "Your opponent was clearly having an off day",
                "I could beat you with one hand tied behind my back üí™",
                "Stop ducking real competition and fight someone good",
                "Your technique is sloppy, learn some basics first",
                "All show, no substance. Fake champion! üëé"
            ];
            return messages[Math.floor(Math.random() * messages.length)];
        }
        
        function getFighterMessage() {
            const messages = [
                "Respect for your last performance! Good fight! ü§ù",
                "Would love to spar with you sometime, let's train!",
                "Saw your technique, very impressive. Keep it up! üëä",
                "Maybe we can fight each other soon? I'm ready! üò§",
                "Your clinch work reminds me of the old masters üôè",
                "Good luck in your next fight, may the best fighter win!",
                "Training hard for our potential matchup! üí™"
            ];
            return messages[Math.floor(Math.random() * messages.length)];
        }
        
        function getGymMessage() {
            const messages = [
                "We'd love to have you train at our facility! üèüÔ∏è",
                "Our doors are always open for champions like you!",
                "Come experience authentic Muay Thai training with us!",
                "We have world-class trainers who can help you improve!",
                "Special rates for professional fighters, interested?",
                "Our gym has produced many champions, you could be next!",
                "Traditional Thai training methods, modern facilities! üáπüá≠"
            ];
            return messages[Math.floor(Math.random() * messages.length)];
        }
        
        function getRandomTime() {
            const times = ['2m ago', '15m ago', '1h ago', '3h ago', '1d ago', '2d ago'];
            return times[Math.floor(Math.random() * times.length)];
        }
        
        function replyToMessage(messageId) {
            const message = socialMessages.find(m => m.id === messageId);
            if (!message) return;
            
            const replyText = prompt(`Reply to ${message.sender}:`);
            if (replyText && replyText.trim()) {
                // Add reply to the message thread
                message.replied = true;
                message.replyText = replyText;
                
                // Show success message
                alert(`Reply sent to ${message.sender}!`);
                
                // Refresh messages display
                updateMessagesDisplay();
            }
        }
        
        function blockUser(messageId) {
            const message = socialMessages.find(m => m.id === messageId);
            if (!message) return;
            
            if (confirm(`Block ${message.sender}? You won't receive messages from them anymore.`)) {
                // Remove message and add to blocked list
                socialMessages = socialMessages.filter(m => m.id !== messageId);
                alert(`${message.sender} has been blocked.`);
                updateMessagesDisplay();
            }
        }
        
        function deleteMessage(messageId) {
            if (confirm('Delete this message?')) {
                socialMessages = socialMessages.filter(m => m.id !== messageId);
                updateMessagesDisplay();
            }
        }

        // Fighting style stats data
        const fightingStyleStats = {
            'muay-femur': {
                speed: 92, power: 78, agility: 95,
                straight: 90, hook: 85, uppercut: 80, elbow: 88, knee: 85,
                roundKick: 95, teep: 98, clinchOff: 90, clinchDef: 95
            },
            'muay-mat': {
                speed: 85, power: 95, agility: 82,
                straight: 88, hook: 95, uppercut: 90, elbow: 85, knee: 75,
                roundKick: 85, teep: 75, clinchOff: 70, clinchDef: 70
            },
            'muay-khao': {
                speed: 75, power: 90, agility: 78,
                straight: 70, hook: 75, uppercut: 70, elbow: 80, knee: 100,
                roundKick: 80, teep: 70, clinchOff: 95, clinchDef: 85
            },
            'muay-tae': {
                speed: 80, power: 88, agility: 80,
                straight: 75, hook: 80, uppercut: 70, elbow: 80, knee: 85,
                roundKick: 100, teep: 85, clinchOff: 80, clinchDef: 80
            },
            'muay-bouk': {
                speed: 82, power: 90, agility: 85,
                straight: 80, hook: 88, uppercut: 85, elbow: 85, knee: 90,
                roundKick: 88, teep: 80, clinchOff: 85, clinchDef: 80
            },
            'muay-sok': {
                speed: 78, power: 88, agility: 80,
                straight: 75, hook: 80, uppercut: 75, elbow: 95, knee: 85,
                roundKick: 80, teep: 75, clinchOff: 85, clinchDef: 80
            },
            'muay-plam': {
                speed: 70, power: 85, agility: 75,
                straight: 65, hook: 70, uppercut: 65, elbow: 80, knee: 90,
                roundKick: 75, teep: 70, clinchOff: 95, clinchDef: 90
            },
            'muay-farang': {
                speed: 85, power: 90, agility: 80,
                straight: 85, hook: 90, uppercut: 85, elbow: 80, knee: 78,
                roundKick: 90, teep: 80, clinchOff: 75, clinchDef: 75
            }
        };

        // Show style stats panel when clicked
        function showStyleStats(styleId) {
            const panel = document.getElementById('styleStatsPanel');
            const statsContent = document.getElementById('statsContent');
            const stats = fightingStyleStats[styleId];
            
            if (!stats) return;
            
            // Create stats display
            statsContent.innerHTML = `
                <div class="space-y-3">
                    <h4 class="text-lg font-bold text-yellow-400 mb-2">Core Attributes</h4>
                    <div class="space-y-2">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-300">Speed:</span>
                            <div class="flex items-center space-x-2">
                                <div class="w-24 bg-gray-600 rounded-full h-2">
                                    <div class="bg-gradient-to-r from-red-500 to-red-600 h-2 rounded-full" style="width: ${stats.speed}%"></div>
                                </div>
                                <span class="text-white font-bold w-8">${stats.speed}</span>
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-300">Power:</span>
                            <div class="flex items-center space-x-2">
                                <div class="w-24 bg-gray-600 rounded-full h-2">
                                    <div class="bg-gradient-to-r from-red-500 to-red-600 h-2 rounded-full" style="width: ${stats.power}%"></div>
                                </div>
                                <span class="text-white font-bold w-8">${stats.power}</span>
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-300">Agility:</span>
                            <div class="flex items-center space-x-2">
                                <div class="w-24 bg-gray-600 rounded-full h-2">
                                    <div class="bg-gradient-to-r from-red-500 to-red-600 h-2 rounded-full" style="width: ${stats.agility}%"></div>
                                </div>
                                <span class="text-white font-bold w-8">${stats.agility}</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="space-y-3">
                    <h4 class="text-lg font-bold text-yellow-400 mb-2">Striking Skills</h4>
                    <div class="space-y-2">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-300">Straight:</span>
                            <div class="flex items-center space-x-2">
                                <div class="w-24 bg-gray-600 rounded-full h-2">
                                    <div class="bg-gradient-to-r from-blue-500 to-blue-600 h-2 rounded-full" style="width: ${stats.straight}%"></div>
                                </div>
                                <span class="text-white font-bold w-8">${stats.straight}</span>
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-300">Hook:</span>
                            <div class="flex items-center space-x-2">
                                <div class="w-24 bg-gray-600 rounded-full h-2">
                                    <div class="bg-gradient-to-r from-blue-500 to-blue-600 h-2 rounded-full" style="width: ${stats.hook}%"></div>
                                </div>
                                <span class="text-white font-bold w-8">${stats.hook}</span>
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-300">Uppercut:</span>
                            <div class="flex items-center space-x-2">
                                <div class="w-24 bg-gray-600 rounded-full h-2">
                                    <div class="bg-gradient-to-r from-blue-500 to-blue-600 h-2 rounded-full" style="width: ${stats.uppercut}%"></div>
                                </div>
                                <span class="text-white font-bold w-8">${stats.uppercut}</span>
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-300">Elbow:</span>
                            <div class="flex items-center space-x-2">
                                <div class="w-24 bg-gray-600 rounded-full h-2">
                                    <div class="bg-gradient-to-r from-purple-500 to-purple-600 h-2 rounded-full" style="width: ${stats.elbow}%"></div>
                                </div>
                                <span class="text-white font-bold w-8">${stats.elbow}</span>
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-300">Knee:</span>
                            <div class="flex items-center space-x-2">
                                <div class="w-24 bg-gray-600 rounded-full h-2">
                                    <div class="bg-gradient-to-r from-purple-500 to-purple-600 h-2 rounded-full" style="width: ${stats.knee}%"></div>
                                </div>
                                <span class="text-white font-bold w-8">${stats.knee}</span>
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-300">Round Kick:</span>
                            <div class="flex items-center space-x-2">
                                <div class="w-24 bg-gray-600 rounded-full h-2">
                                    <div class="bg-gradient-to-r from-green-500 to-green-600 h-2 rounded-full" style="width: ${stats.roundKick}%"></div>
                                </div>
                                <span class="text-white font-bold w-8">${stats.roundKick}</span>
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-300">Teep:</span>
                            <div class="flex items-center space-x-2">
                                <div class="w-24 bg-gray-600 rounded-full h-2">
                                    <div class="bg-gradient-to-r from-green-500 to-green-600 h-2 rounded-full" style="width: ${stats.teep}%"></div>
                                </div>
                                <span class="text-white font-bold w-8">${stats.teep}</span>
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-300">Clinch Off:</span>
                            <div class="flex items-center space-x-2">
                                <div class="w-24 bg-gray-600 rounded-full h-2">
                                    <div class="bg-gradient-to-r from-yellow-500 to-yellow-600 h-2 rounded-full" style="width: ${stats.clinchOff}%"></div>
                                </div>
                                <span class="text-white font-bold w-8">${stats.clinchOff}</span>
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-300">Clinch Def:</span>
                            <div class="flex items-center space-x-2">
                                <div class="w-24 bg-gray-600 rounded-full h-2">
                                    <div class="bg-gradient-to-r from-yellow-500 to-yellow-600 h-2 rounded-full" style="width: ${stats.clinchDef}%"></div>
                                </div>
                                <span class="text-white font-bold w-8">${stats.clinchDef}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Show the panel
            panel.classList.remove('hidden');
        }

        // Initialize
        checkSaveFile();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'970ec0c74571e75d',t:'MTc1NTQ5MjIzNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
